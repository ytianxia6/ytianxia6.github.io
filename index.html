<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ytianxia6.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="记录作者的一些历程，很杂乱，涉及很广...我也不知道我会什么">
<meta property="og:type" content="website">
<meta property="og:title" content="Haroon的个人博客">
<meta property="og:url" content="http://ytianxia6.github.io/index.html">
<meta property="og:site_name" content="Haroon的个人博客">
<meta property="og:description" content="记录作者的一些历程，很杂乱，涉及很广...我也不知道我会什么">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="yhl">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://ytianxia6.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Haroon的个人博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Haroon的个人博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">没人管的博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://ytianxia6.github.io/2022/01/10/7aae2d2ba3dd4b2a894613620f656bd7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yhl">
      <meta itemprop="description" content="记录作者的一些历程，很杂乱，涉及很广...我也不知道我会什么">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haroon的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/10/7aae2d2ba3dd4b2a894613620f656bd7/" class="post-title-link" itemprop="url">VSCode 使用docker-compose进行golang开发</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-01-10 14:56:30 / 修改时间：16:18:51" itemprop="dateCreated datePublished" datetime="2022-01-10T14:56:30+08:00">2022-01-10</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="VSCode-使用-docker-compose-进行-golang-开发"><a href="#VSCode-使用-docker-compose-进行-golang-开发" class="headerlink" title="VSCode 使用 docker-compose 进行 golang 开发"></a>VSCode 使用 docker-compose 进行 golang 开发</h1><h2 id="O-前言"><a href="#O-前言" class="headerlink" title="O 前言"></a>O 前言</h2><p>在网上搜索使用 vscode 进行 golang 的 docker 配置，有大量的文章，在官网也有很详细的说明，但我就是看不明白！！</p>
<p>自己搞了一晚上，总算把所有的坑填上了。记录一下，聊以自慰。</p>
<h2 id="一、-前置操作"><a href="#一、-前置操作" class="headerlink" title="一、 前置操作"></a>一、 前置操作</h2><h3 id="安装-vscode-略"><a href="#安装-vscode-略" class="headerlink" title="安装 vscode 略"></a>安装 vscode 略</h3><h3 id="安装-golang-略"><a href="#安装-golang-略" class="headerlink" title="安装 golang 略"></a>安装 golang 略</h3><h3 id="golang-使用-module-模式而非-GOPATH-略"><a href="#golang-使用-module-模式而非-GOPATH-略" class="headerlink" title="golang 使用 module 模式而非 GOPATH, 略"></a>golang 使用 module 模式而非 GOPATH, 略</h3><h3 id="vscode-中安装-remote-containers-插件，略"><a href="#vscode-中安装-remote-containers-插件，略" class="headerlink" title="vscode 中安装 remote-containers 插件，略"></a>vscode 中安装 remote-containers 插件，略</h3><h2 id="二、新建-go-项目"><a href="#二、新建-go-项目" class="headerlink" title="二、新建 go 项目"></a>二、新建 go 项目</h2><ol>
<li><p> 创建文件夹 <code>/golang/study.06</code>， 并使用 vscode 打开。</p>
</li>
<li><p> 新建<code>main.go</code></p>
</li>
</ol>
<p>我这里使用`</p>
<figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">homepage</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">	<span class="comment">// 显示内容</span></span><br><span class="line">	fmt.Fprintf(w, <span class="string">&quot;Hello golang http in docker！&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="comment">// 设置路由</span></span><br><span class="line">	http.HandleFunc(<span class="string">&quot;/&quot;</span>, homepage)</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 启动web服务，监听 9090</span></span><br><span class="line">	log.Fatel(http.ListenAndServe(<span class="string">&quot;:9090&quot;</span>, <span class="literal">nil</span>))</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li> 初始化模块</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 初始化模块</span></span><br><span class="line">go mod init study06</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载依赖模块</span></span><br><span class="line">go mod tidy</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="4">
<li> 测试</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 启动服务</span><br><span class="line">go run .</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在浏览器查看<code>http://localhost:9090</code> ，可以看到效果。<br><img src="/resource/192740b583244d7c86a5cdc10f3017f7.png" alt="7e456104be1a3f46c969fde1e1e5e9e1.png"></p>
<ol start="5">
<li> 文件目录</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">study.06</span><br><span class="line">|-- go.mod</span><br><span class="line">|-- main.go</span><br></pre></td></tr></table></figure>

<h2 id="三、添加-docker-compose-支持"><a href="#三、添加-docker-compose-支持" class="headerlink" title="三、添加 docker-compose 支持"></a>三、添加 docker-compose 支持</h2><h3 id="1-添加模板"><a href="#1-添加模板" class="headerlink" title="1. 添加模板"></a>1. 添加模板</h3><p>执行 <code>F1</code>， <code>Remote-Containers: Add Development Container Configuration Files</code>，依次选择 <code>Go</code>， <code>default</code>，<code>lts(default)</code>，<code>确定</code>。</p>
<p><img src="/resource/93278618dd8140189629f782e3543207.png" alt="1db1d262bfe97deb5c5b18c3b8b66db7.png"></p>
<p><img src="/resource/8a353506ae124b7e80fa76ae437389ff.png" alt="975a40e45152240da6ca215df7ff1de9.png"></p>
<p><img src="/resource/efefecdb4bae4916b67c9f803c07822a.png" alt="8c8634f9e8f971273fd1e32af3e6ee71.png"></p>
<p><img src="/resource/795e3a1e3cd5491986e45d684f6b6aae.png" alt="2ff97372787872284f87c9d4d75e5885.png"></p>
<p><img src="/resource/1cf3215966374073be4a30c066570f4d.png" alt="3c125d21da1d8f0f313cb4f6e9d8223c.png"></p>
<p>此时，添加了 <code>.devcontainer/.devcontiner.json</code>和<code>.devcontaier/Dockerfile</code>两个文件。</p>
<h3 id="2-使用docker-compose"><a href="#2-使用docker-compose" class="headerlink" title="2. 使用docker-compose"></a>2. 使用<code>docker-compose</code></h3><p>在<code>.devcontainer</code>中添加<code>docker-compose.yml</code>,也可以多添加几个配置，如<code>docker-compose.dev.yml</code>。</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker-compose.yml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">study-06:</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">Dockerfile</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker-compose.dev.yml</span></span><br><span class="line"></span><br><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">study-06:</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">Dockerfile</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">..:/workspace:cached</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">9090</span><span class="string">:9090</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">cap_add:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">SYS_PTRACE</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">security_opt:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">seccomp:unconfined</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">command:</span> <span class="string">/bin/sh</span> <span class="string">-c</span> <span class="string">&quot;while sleep 1000; do :; done&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-修改-devcontainer-json"><a href="#3-修改-devcontainer-json" class="headerlink" title="3. 修改 devcontainer.json"></a>3. 修改 <code>devcontainer.json</code></h3><p>默认配置是使用<code>Dockerfile</code>的，修改<code>devcontainer.json</code> 以使用<code>docker-compose</code>。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// For format details, see https://aka.ms/devcontainer.json. For config options, see the README at:</span></span><br><span class="line"><span class="comment">// https://github.com/microsoft/vscode-dev-containers/tree/v0.209.6/containers/go</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Go&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;dockerComposeFile&quot;</span>: [<span class="string">&quot;docker-compose.yml&quot;</span>, <span class="string">&quot;docker-compose.dev.yml&quot;</span>],</span><br><span class="line">  <span class="attr">&quot;service&quot;</span>: <span class="string">&quot;study-06&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;workspaceFolder&quot;</span>: <span class="string">&quot;/workspace&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;shutdownAction&quot;</span>: <span class="string">&quot;stopCompose&quot;</span>,</span><br><span class="line">  <span class="comment">// &quot;build&quot;: &#123;</span></span><br><span class="line">  <span class="comment">// 	&quot;dockerfile&quot;: &quot;Dockerfile&quot;,</span></span><br><span class="line">  <span class="comment">// 	&quot;args&quot;: &#123;</span></span><br><span class="line">  <span class="comment">// 		// Update the VARIANT arg to pick a version of Go: 1, 1.16, 1.17</span></span><br><span class="line">  <span class="comment">// 		// Append -bullseye or -buster to pin to an OS version.</span></span><br><span class="line">  <span class="comment">// 		// Use -bullseye variants on local arm64/Apple Silicon.</span></span><br><span class="line">  <span class="comment">// 		&quot;VARIANT&quot;: &quot;1-bullseye&quot;,</span></span><br><span class="line">  <span class="comment">// 		// Options</span></span><br><span class="line">  <span class="comment">// 		&quot;NODE_VERSION&quot;: &quot;lts/*&quot;</span></span><br><span class="line">  <span class="comment">// 	&#125;</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="comment">// &quot;runArgs&quot;: [ &quot;--cap-add=SYS_PTRACE&quot;, &quot;--security-opt&quot;, &quot;seccomp=unconfined&quot; ],</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Set *default* container specific settings.json values on container create.</span></span><br><span class="line">  <span class="attr">&quot;settings&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;go.toolsManagement.checkForUpdates&quot;</span>: <span class="string">&quot;local&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;go.useLanguageServer&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;go.gopath&quot;</span>: <span class="string">&quot;/go&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;go.goroot&quot;</span>: <span class="string">&quot;/usr/local/go&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Add the IDs of extensions you want installed when the container is created.</span></span><br><span class="line">  <span class="attr">&quot;extensions&quot;</span>: [<span class="string">&quot;golang.Go&quot;</span>],</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Use &#x27;forwardPorts&#x27; to make a list of ports inside the container available locally.</span></span><br><span class="line">  <span class="comment">// &quot;forwardPorts&quot;: [],</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Use &#x27;postCreateCommand&#x27; to run commands after the container is created.</span></span><br><span class="line">  <span class="comment">// &quot;postCreateCommand&quot;: &quot;go version&quot;,</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Comment out connect as root instead. More info: https://aka.ms/vscode-remote/containers/non-root.</span></span><br><span class="line">  <span class="attr">&quot;remoteUser&quot;</span>: <span class="string">&quot;vscode&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-修改Dockerfile"><a href="#4-修改Dockerfile" class="headerlink" title="4. 修改Dockerfile"></a>4. 修改<code>Dockerfile</code></h3><p>最后添加 <code>Expose 9090</code> 绑定端口</p>
<h3 id="5-在容器中打开文件夹"><a href="#5-在容器中打开文件夹" class="headerlink" title="5. 在容器中打开文件夹"></a>5. 在容器中打开文件夹</h3><p><code>F1</code> 执行 <code>Open Folder in Container</code>,选择 <code>study.06</code>目录，此时<code>vscode</code>会编译并运行镜像，进入镜像中的环境。</p>
<p><img src="/resource/85cbc4ef168343b6beccb7e49273986f.png" alt="6aac815f71728ea0548056b136af6619.png"></p>
<p>执行 <code>go run .</code>，就可以在 <code>http://localhost:9090</code> 中看到结果了。</p>
<h3 id="6-更新"><a href="#6-更新" class="headerlink" title="6. 更新"></a>6. 更新</h3><p>如果对<code>docker</code>文件进行任何修改后，可以执行 <code>F1</code> -&gt; <code>Rebuild 重新生成镜像</code>。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://ytianxia6.github.io/2020/08/03/137ffe52017f4ca8ba4c4e9cfac60461/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yhl">
      <meta itemprop="description" content="记录作者的一些历程，很杂乱，涉及很广...我也不知道我会什么">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haroon的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/03/137ffe52017f4ca8ba4c4e9cfac60461/" class="post-title-link" itemprop="url">wpf 绑定ListViewItem</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-08-04 00:35:49 / 修改时间：00:43:50" itemprop="dateCreated datePublished" datetime="2020-08-04T00:35:49+08:00">2020-08-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><s><a target="_blank" rel="noopener" href="http://maxiang.info/#/?provider=evernote&guid=9b1a9f14-7cb3-400a-ba72-0f988b591f06&notebook=blog">Edit</a></s></p>
<h1 id="wpf-绑定-ListViewItem"><a href="#wpf-绑定-ListViewItem" class="headerlink" title="wpf 绑定 ListViewItem"></a>wpf 绑定 ListViewItem</h1><p>Wpf 绑定<code>ListViewItem</code> 中的控件 <code>Command</code> 到 <code>ViewModel</code> ：</p>
<h2 id="1-给Window-定义名字："><a href="#1-给Window-定义名字：" class="headerlink" title="1. 给Window 定义名字："></a>1. 给<code>Window</code> 定义名字：</h2><p><code>&lt;Window x:Name=&quot;ThisWnd&quot;&gt;</code><br>在绑定时找到指定名字</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;ListView&gt;</span><br><span class="line"></span><br><span class="line">    &lt;ListView.ItemTemplate&gt;</span><br><span class="line"></span><br><span class="line">        &lt;DataTemplate&gt;</span><br><span class="line"></span><br><span class="line">            &lt;Button Command=&quot;&#123;Binding ElementName=ThisWnd, Path=DataContext.CallCommand&#125;&quot;</span><br><span class="line"></span><br><span class="line">            Text=&#123;Binding Name&#125;&gt;&lt;/Button&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-相对路径查找"><a href="#2-相对路径查找" class="headerlink" title="2. 相对路径查找"></a>2. 相对路径查找</h2><p>另一种方式是根据类型或层次查找</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;ListView&gt;</span><br><span class="line"></span><br><span class="line">    &lt;ListView.ItemTemplate&gt;</span><br><span class="line"></span><br><span class="line">        &lt;DataTemplate&gt;</span><br><span class="line"></span><br><span class="line">            &lt;Button Command=&quot;&#123;Binding RelativeSource=&#123;RelativeSource FindAncestor, AncestorType=&#123;x:Type ListView&#125;&#125;, Path=DataContext.CallCommand&#125;&quot;</span><br><span class="line"></span><br><span class="line">            Text=&#123;Binding Name&#125;&gt;&lt;/Button&gt;</span><br></pre></td></tr></table></figure>

<div style="display: none;">@%28blog%29%5B.net%2C%20mvvm%2C%20wpf%2C%20posts%5D%0A%0A%23%20wpf%20%u7ED1%u5B9AListViewItem%0A%0AWpf%20%u7ED1%u5B9A%60ListViewItem%60%20%u4E2D%u7684%u63A7%u4EF6%20%60Command%60%20%u5230%20%60ViewModel%60%20%uFF1A%0A%0A%23%23%201.%20%u7ED9%60Window%60%20%u5B9A%u4E49%u540D%u5B57%uFF1A%0A%0A%60%60%60c%23%0A%3CWindow%20x%3AName%3D%22ThisWnd%22%3E%0A%60%60%60%0A%0A%u5728%u7ED1%u5B9A%u65F6%u627E%u5230%u6307%u5B9A%u540D%u5B57%0A%0A%60%60%60c%23%0A%3CListView%3E%0A%09%3CListView.ItemTemplate%3E%0A%09%09%3CDataTemplate%3E%0A%09%09%09%3CButton%20Command%3D%22%7BBinding%20ElementName%3DThisWnd%2C%20Path%3DDataContext.CallCommand%7D%22%0A%09%09%09Text%3D%7BBinding%20Name%7D%3E%3C/Button%3E%0A%60%60%60%0A%0A%23%23%202.%20%u76F8%u5BF9%u8DEF%u5F84%u67E5%u627E%0A%u53E6%u4E00%u79CD%u65B9%u5F0F%u662F%u6839%u636E%u7C7B%u578B%u6216%u5C42%u6B21%u67E5%u627E%0A%0A%60%60%60%20c%23%0A%3CListView%3E%0A%09%3CListView.ItemTemplate%3E%0A%09%09%3CDataTemplate%3E%0A%09%09%09%3CButton%20Command%3D%22%7BBinding%20RelativeSource%3D%7BRelativeSource%20FindAncestor%2C%20AncestorType%3D%7Bx%3AType%20ListView%7D%7D%2C%20Path%3DDataContext.CallCommand%7D%22%0A%09%09%09Text%3D%7BBinding%20Name%7D%3E%3C/Button%3E%0A%0A%60%60%60</div>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://ytianxia6.github.io/2020/07/08/7d937fdcf868470eabb69465b94d0e8c/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yhl">
      <meta itemprop="description" content="记录作者的一些历程，很杂乱，涉及很广...我也不知道我会什么">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haroon的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/08/7d937fdcf868470eabb69465b94d0e8c/" class="post-title-link" itemprop="url">查找MsBuild.exe</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-07-09 05:23:50 / 修改时间：05:29:52" itemprop="dateCreated datePublished" datetime="2020-07-09T05:23:50+08:00">2020-07-09</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><s><a target="_blank" rel="noopener" href="http://maxiang.info/#/?provider=evernote&guid=1a061c0b-3197-4fea-b895-7c75d3886af1&notebook=blog">Edit</a></s></p>
<h1 id="查找-MsBuild-exe"><a href="#查找-MsBuild-exe" class="headerlink" title="查找 MsBuild.exe"></a>查找 MsBuild.exe</h1><h2 id="早期"><a href="#早期" class="headerlink" title="早期"></a>早期</h2><p>适用于.net4.0<br><code>set MSBuild=%windir%\Microsoft.NET\Framework\v4.0.30319\MsBuild.exe</code></p>
<h2 id="Vs2017"><a href="#Vs2017" class="headerlink" title="Vs2017"></a>Vs2017</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">for /f &quot;tokens=1,2*&quot; %%i in (&#x27;&quot;reg query &quot;HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\VisualStudio\SxS\VS7&quot; /v  15.0&quot;&#x27;) do (set &quot;Vs17=%%k&quot;)</span><br><span class="line"></span><br><span class="line">if &quot;%vs17%&quot; == &quot;&quot; (for /f &quot;tokens=1,2*&quot; %%i in (&#x27;&quot;reg query &quot;HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\VisualStudio\SxS\VS7&quot; /v  15.0&quot;&#x27;) do (set &quot;Vs17=%%k&quot;))</span><br><span class="line"></span><br><span class="line">set &quot;MSBuild=%vs17%\MSBuild\15.0\Bin\MsBuild.exe&quot;</span><br></pre></td></tr></table></figure>

<h2 id="最新-vswhere"><a href="#最新-vswhere" class="headerlink" title="最新 vswhere"></a>最新 vswhere</h2><p><a target="_blank" rel="noopener" href="https://github.com/microsoft/vswhere/wiki/Find-MSBuild">vswhere 查找 Msbuild</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@echo off</span><br><span class="line"></span><br><span class="line">setlocal enabledelayedexpansion</span><br><span class="line"></span><br><span class="line">set &quot;VsWhere=%ProgramFiles(x86)%\Microsoft Visual Studio\Installer\vswhere.exe&quot;</span><br><span class="line"></span><br><span class="line">for /f &quot;usebackq tokens=*&quot; %%i in (`&quot;%VsWhere%&quot; -latest -requires Microsoft.Component.MSBuild -find MSBuild\**\Bin\MSBuild.exe`) do (</span><br><span class="line"></span><br><span class="line">  &quot;%%i&quot; %*</span><br><span class="line"></span><br><span class="line">  exit /b !errorlevel!</span><br><span class="line"></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<div style="display: none;">@%28blog%29%5BVisual%20Studio%2C%20msbuild%2C%20posts%5D%0A%0A%23%20%u67E5%u627EMsBuild.exe%0A%0A%23%23%20%u65E9%u671F%0A%0A%u9002%u7528%u4E8E.net4.0%0A%60%60%60bash%0Aset%20MSBuild%3D%25windir%25%5CMicrosoft.NET%5CFramework%5Cv4.0.30319%5CMsBuild.exe%0A%60%60%60%0A%0A%23%23%20Vs2017%0A%0A%0A%60%60%60%20bash%0Afor%20/f%20%22tokens%3D1%2C2*%22%20%25%25i%20in%20%28%27%22reg%20query%20%22HKEY_LOCAL_MACHINE%5CSOFTWARE%5CMicrosoft%5CVisualStudio%5CSxS%5CVS7%22%20/v%20%2015.0%22%27%29%20do%20%28set%20%22Vs17%3D%25%25k%22%29%0Aif%20%22%25vs17%25%22%20%3D%3D%20%22%22%20%28for%20/f%20%22tokens%3D1%2C2*%22%20%25%25i%20in%20%28%27%22reg%20query%20%22HKEY_LOCAL_MACHINE%5CSOFTWARE%5CWOW6432Node%5CMicrosoft%5CVisualStudio%5CSxS%5CVS7%22%20/v%20%2015.0%22%27%29%20do%20%28set%20%22Vs17%3D%25%25k%22%29%29%0A%0Aset%20%22MSBuild%3D%25vs17%25%5CMSBuild%5C15.0%5CBin%5CMsBuild.exe%22%0A%0A%60%60%60%0A%0A%23%23%20%u6700%u65B0%20vswhere%0A%0A%5Bvswhere%u67E5%u627EMsbuild%5D%28https%3A//github.com/microsoft/vswhere/wiki/Find-MSBuild%29%0A%60%60%60bash%0A@echo%20off%0Asetlocal%20enabledelayedexpansion%0A%0Aset%20%22VsWhere%3D%25ProgramFiles%28x86%29%25%5CMicrosoft%20Visual%20Studio%5CInstaller%5Cvswhere.exe%22%0A%0Afor%20/f%20%22usebackq%20tokens%3D*%22%20%25%25i%20in%20%28%60%22%25VsWhere%25%22%20-latest%20-requires%20Microsoft.Component.MSBuild%20-find%20MSBuild%5C**%5CBin%5CMSBuild.exe%60%29%20do%20%28%0A%20%20%22%25%25i%22%20%25*%0A%20%20exit%20/b%20%21errorlevel%21%0A%29%0A%60%60%60</div>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://ytianxia6.github.io/2020/05/05/938d3ac24ccd4386ae0b5ec340456be5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yhl">
      <meta itemprop="description" content="记录作者的一些历程，很杂乱，涉及很广...我也不知道我会什么">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haroon的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/05/938d3ac24ccd4386ae0b5ec340456be5/" class="post-title-link" itemprop="url">更新virtualbox</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-05-06 01:44:42 / 修改时间：01:45:14" itemprop="dateCreated datePublished" datetime="2020-05-06T01:44:42+08:00">2020-05-06</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a target="_blank" rel="noopener" href="https://askubuntu.com/questions/827733/removing-virtualbox-5-1-in-a-stuck-state">https://askubuntu.com/questions/827733/removing-virtualbox-5-1-in-a-stuck-state</a></p>
<p>您可能正在运行 VirtualBox 的自动启动服务。通过运行以下命令进行检查。<br>sudo systemctl status vboxautostart-service<br>如果它正在运行，则停止它。<br>sudo systemctl stop vboxautostart-service<br>然后找到并杀死使用以下命令运行的所有进程。（大约是三（3））<br>ps -A | grep VB<br>sudo kill <pid><br>最后，删除并清除 VirtualBox<br>sudo apt-get remove virtualbox-* –purge</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://ytianxia6.github.io/2020/03/26/8d69180ccf72404684df1e49b293745e/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yhl">
      <meta itemprop="description" content="记录作者的一些历程，很杂乱，涉及很广...我也不知道我会什么">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haroon的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/26/8d69180ccf72404684df1e49b293745e/" class="post-title-link" itemprop="url">数据绑定</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-27 02:03:13 / 修改时间：07:38:29" itemprop="dateCreated datePublished" datetime="2020-03-27T02:03:13+08:00">2020-03-27</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><s><a target="_blank" rel="noopener" href="http://maxiang.info/#/?provider=evernote&guid=7fbb63ee-3df0-48d7-9566-c54ccdee3e88&notebook=mvvmcross">Edit</a></s></p>
<h1 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h1><p>数据绑定是 MVVM 所依赖的，用于绑定 <code>View</code> 和<code>ViewModel</code> 的关键技术。<br>数据绑定提供和维护 <code>View</code> 和<code>ViewModel</code> 之间的双向连接，正确理解数据绑定对每一个 <code>MVVM</code> 开发者都是很有必要的。</p>
<p>在<code>mvvmcross</code>中，内置了与 微软的基于<code>xaml</code>框架提供的结构对应的数据绑定，但是在最新的开发过程中，<code>mvvmcross</code> 在新的方向上扩展了数据绑定。</p>
<p>在本节我们首先关注核心的 <code>Windows</code> 数据绑定体系，然后扩展了一些新方法。</p>
<h2 id="核心-windows-数据绑定"><a href="#核心-windows-数据绑定" class="headerlink" title="核心 windows 数据绑定"></a>核心 windows 数据绑定</h2><p>在本结构中，对于每一个绑定：</p>
<ul>
<li>在<code>View</code>和<code>ViewModel</code>中都使用 c# 属性</li>
<li>一个简单的<code>View</code> 属性一定连接着一个 <code>ViewModel</code> 属性。</li>
<li>一个指定的数据模式来指定数据方向（单向、双向等）</li>
<li>可选的可以指定一个值转换器，它也可选的可参数化</li>
<li>同样可选的可以指定一个当绑定失败时的反馈。</li>
</ul>
<h3 id="c-属性和数据绑定"><a href="#c-属性和数据绑定" class="headerlink" title="c# 属性和数据绑定"></a>c# 属性和数据绑定</h3><p>在<code>View</code>和<code>ViewModel</code> 中，都使用 c#属性来实现数据绑定。<br>在<code>ViewModel</code>中，属性看起来是这个样子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">private string _myProperty;</span><br><span class="line"></span><br><span class="line">public string MyProperty</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    get =&gt; _myProperty;</span><br><span class="line"></span><br><span class="line">    set</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        _myProperty = value;</span><br><span class="line"></span><br><span class="line">        RaisePropertyChanged(() =&gt; MyProperty);</span><br><span class="line"></span><br><span class="line">        // 这里可以放一些当属性MyProperty被更新时的其它操作。</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
</blockquote>
<blockquote>
<p>注意， 在检查过值真的被改变了之后，MvvmCross 提供了辅助方法来设置值和提升 <code>PropertyChanged</code>&gt; 事件。推荐使用在<code>MvxViewModel</code>&gt; 和<code>MvxPropertyChanged</code>&gt; 中实现的<code>SetProperty（）</code>&gt; 来实现这一步。</p>
</blockquote>
<p>在这里我们使用了一个私有的后台字段来存储当前值，并调用 <code>RaisePropertyChanged</code> 来向任何监听视发送值已经被改变的信号。<br>在<code>View</code>中：</p>
<ul>
<li>在 Windows<code>平台上， 使用</code>DependencyProperty<code>来存储变量。从所周知，</code>DependencyProperty` 提供以下特性：<ul>
<li>在<code>View</code>中允许 <code>get</code> 和<code>set</code> 操作</li>
<li>在<code>View</code> 中监听值的改变，例如： 用户为 <code>TextBox</code> 输入了新值。</li>
</ul>
</li>
<li>在新的 c#平台如 <code>Xamarin.Android</code> 和<code>Xamarin.IOS</code>:<ul>
<li>略过</li>
</ul>
</li>
</ul>
<h3 id="属性绑定属性"><a href="#属性绑定属性" class="headerlink" title="属性绑定属性"></a>属性绑定属性</h3><p>使用上述的<code>View</code>的<code>ViewModel</code>属性，通常是一个 <code>ViewModel</code>属性对应着一个<code>View</code>属性的值。<br>例如：</p>
<ul>
<li>如果你的视包含一个<code>CheckBox</code>， 它有一个<code>IsChecked</code> 值</li>
<li>你的<code>ViewModel</code> 可以包含一个属性：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">private bool _rememberMe;</span><br><span class="line"></span><br><span class="line">public bool RememberMe</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    get =&gt; _rememberMe;</span><br><span class="line"></span><br><span class="line">    set =&gt; SetProperty(ref _remember, value);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>一个数据绑定可以将<code>View</code>中的<code>IsChecked</code> 与<code>ViewModel</code>中的<code>RememberMe</code> 绑定在一起。</li>
</ul>
<h3 id="数据绑定事件和行为"><a href="#数据绑定事件和行为" class="headerlink" title="数据绑定事件和行为"></a>数据绑定事件和行为</h3><p>数据绑定允许一个<code>ViewModel</code> 响应<code>View</code>中发生的事件。例如，对<code>ViewModel</code>响应按钮的点击事件。<br>通常实现这一点的技术是为<code>ViewModel</code>实现一个<code>Command</code>属性来绑定到<code>View</code>的<code>Command</code>属性。</p>
<p>例如，一个<code>CheckBox</code> 有一个 <code>ChekckedCommand</code>属性，可以绑定到一个<code>ViewModel</code>的 <code>RememberMeChangedCommand</code>属性上。</p>
<h3 id="绑定模式"><a href="#绑定模式" class="headerlink" title="绑定模式"></a>绑定模式</h3><p>从<code>View</code>上绑定<code>ViewModel</code>中的属性一共有四种模式:</p>
<ul>
<li>单向</li>
<li>单向到源</li>
<li>双向</li>
<li>一次性</li>
</ul>
<h4 id="单向"><a href="#单向" class="headerlink" title="单向"></a>单向</h4><ul>
<li>绑定数据从 <code>ViewModel</code> 传输到<code>View</code></li>
<li>任何时候，当<code>ViewModel</code>属性变化时，<code>View</code>中的属性自动调整</li>
<li>这种绑定模式通常用来显示，例如，数据来自动态源，比如传感器、网络数据源等。</li>
<li>在 Windows/xaml， 这通常是默认绑定样式。所以如果没有指定其它绑定样式，就使用此样式。</li>
</ul>
<h4 id="单向到源"><a href="#单向到源" class="headerlink" title="单向到源"></a>单向到源</h4><ul>
<li>绑定数据从<code>View</code> 到<code>ViewModel</code>。</li>
<li>当<code>View</code>属性发生变化时，影响到的<code>ViewModel</code>会被更新。</li>
<li>这种模式通常用来从用户收集新信息，例如 用户填写空表格。</li>
<li>实际上，这种模式很少用，大部分开发者会选择使用双向模式。</li>
</ul>
<h4 id="双向"><a href="#双向" class="headerlink" title="双向"></a>双向</h4><ul>
<li>这种模式数据双向同步</li>
<li>在<code>View</code>和<code>ViewModel</code> 中的属性都会被监听，一个更改，另一个都会被更新。</li>
<li>这种模式通常用来编辑已有的条目，是开发人员最常用的模式</li>
<li>MvvmCross 已经创建了新的绑定，这将是 MvvmCross 最常用的模式。</li>
</ul>
<h4 id="一次性"><a href="#一次性" class="headerlink" title="一次性"></a>一次性</h4><ul>
<li>这种模式将数据从<code>ViewModel</code> 发给<code>View</code></li>
<li>这种模式不监听<code>ViewModel</code>的 消息和事件</li>
<li>这种模式下，只在设置数据源时，尝试从<code>ViewModel</code> 传输数据给<code>View</code>，这种绑定不监听任何更改，也不做任何更新，除非重设了数据源。</li>
<li>这种模式很少用， 但是可以用在初始化后不打算再更改的配置属性上。</li>
<li>在 mvvmcross 中，当从语言文件读取静态文本时，我们使用 一次性绑定。这是因为，通常我们让用户选择语言，但是一旦选定，用户很少会去更改语言。</li>
</ul>
<h3 id="值转换器"><a href="#值转换器" class="headerlink" title="值转换器"></a>值转换器</h3><p><code>ValueConverter</code> 是一个实现了<code>IValueConverter</code> 接口的类。<br>这个接口提供了两个对象级别的转换方法：</p>
<ul>
<li><code>Convert</code> - 提供了一个简单的从<code>ViewModel</code> 到<code>View</code> 的转换机制</li>
<li><code>ConvertBack</code> - 提供了一个从 <code>View</code> 返回到 <code>ViewModel</code> 的转换机制</li>
</ul>
<p>最常见的情形是只提供一个用来在<code>View</code>上显示的转换，在这种情况下，只需要实现 <code>Convert</code> 方法。</p>
<p>因为 <code>IValueConverter</code> 接口在每个平台上的实现并不完全一样， MvvmCross 提供了一个可以在每个平台上映射到 <code>IValueConverter</code>接口的 <code>IMvxValueConvert</code> 接口代替。</p>
<p>更进一步的， MvvmCross 提供了一些基类来帮助实现转换器：</p>
<ul>
<li><code>MvxValueConverter</code></li>
<li><code>MvxValueConverter&lt;TForm&gt;</code></li>
<li><code>MvxValueConverter&lt;TForm, TTo&gt;</code></li>
</ul>
<p>例如，一个 <code>LengthValueConverter</code> 用来显示字符串长度，不实现<code>ConvertBack</code>可以这样实现：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class LengthValueConverter : MvxValueConverter&lt;string, int&gt;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    protected override int Converter(string value, Type targetType, object parameter, CultureInfo cultureInfo)</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        if (value == null)</span><br><span class="line"></span><br><span class="line">            return 0;</span><br><span class="line"></span><br><span class="line">        return value.length;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>值转换器也可以带参数。这通常可以使转换器在不同情况下重用。例如，一个<code>TrimValueConverter</code> 可以带有需要清除字符的参数。</p>
<h3 id="备用值"><a href="#备用值" class="headerlink" title="备用值"></a>备用值</h3><p>有时， <code>ViewModel</code>的源属性会失效，例如：</p>
<ul>
<li>假设你绑定了一个 <code>Label</code> 的<code>Text</code> 属性到 <code>ViewModel</code>的<code>Customer.FirstName</code>属性。</li>
<li>然后你指定了一个备用值 <code>FallBackValue=&#39;no customer&#39;</code></li>
<li>任何时候，如果 <code>Customer</code> 被设为<code>null</code>， <code>Customer.FirstName</code> 会变为<code>UnsetValue</code>， 回传值<code>&#39;no customer&#39;</code> 会被显示。</li>
</ul>
<blockquote>
<p>注意：</p>
</blockquote>
<ul>
<li><blockquote>
<p>在本例中，如果<code>Customer</code>&gt; 是一个对象，而将 <code>Customer.FirstName</code>&gt; 设为<code>null</code>&gt; ， 不会触发备用值。备用值只会针对<code>Unset</code>&gt; ，即数据绑定找不到值时使用，<code>null</code>&gt; 也是一个值，它不会使用备用值。</p>
</blockquote>
</li>
</ul>
<blockquote>
</blockquote>
<ul>
<li><blockquote>
<p>会触发备用值的一种情形是抛出了异常。例如，在值转换器中抛出了异常，绑定机制会将异常当作 <code>UnsetValue</code>&gt; ，然后使用后备值。</p>
</blockquote>
</li>
</ul>
<blockquote>
</blockquote>
<h3 id="关于-DataContext"><a href="#关于-DataContext" class="headerlink" title="关于 DataContext"></a>关于 DataContext</h3><p>在本节中，你可以看到我们使用了<code>View</code>和<code>ViewModel</code>，你也可以在本节中和代码中看到<code>DataContext</code>。<br><code>DataContext</code> 是一个在<code>View</code>上被赋值 <code>ViewModel</code>的简单 c#属性名。<br>可以认为 <code>ViewModel</code> 和 <code>DataContext</code> 是一样的。</p>
<h2 id="MvvmCross-数据绑定"><a href="#MvvmCross-数据绑定" class="headerlink" title="MvvmCross 数据绑定"></a>MvvmCross 数据绑定</h2><p>数据绑定总是 MvvmCross 的核心，并且它的功能性随着 mvvmcross 的版本迭代更加完善。<br>Mvvm 数据绑定的进化过程沿着以下路线：</p>
<ol>
<li> Json</li>
<li> Swiss</li>
<li> Fluent</li>
<li> Tibet, Rio 和未来的</li>
</ol>
<h3 id="1-Json"><a href="#1-Json" class="headerlink" title="1. Json"></a>1. Json</h3><p>在 MvvmCross 第一个版本中使用 json 来存储数据绑定。<br>json 版本已经被弃用， 从 v3 开始就不再使用了。如果你在例子或文档中看到 json 绑定，请注意它们已经过时了</p>
<h3 id="2-Swiss"><a href="#2-Swiss" class="headerlink" title="2. Swiss"></a>2. Swiss</h3><p>Json 的替代版本被称为 ‘Swiss’。它提供了与 json 绑定相同的功能，但是更加清晰和简洁。<br>例如：</p>
<ul>
<li>json 绑定是这样:</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    &#x27;Text&#x27;:</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        &#x27;Path&#x27; : &#x27;TweetText&#x27;,</span><br><span class="line"></span><br><span class="line">        &#x27;Converter&#x27; : &#x27;RemainingLength&#x27;,</span><br><span class="line"></span><br><span class="line">        &#x27;ConverterParameter&#x27; : 140</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用 Swiss：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Text TweetText,</span><br><span class="line"></span><br><span class="line">    Converter=RemainingLength,</span><br><span class="line"></span><br><span class="line">    ConverterParameter=140</span><br></pre></td></tr></table></figure>

<h3 id="3-Fluent"><a href="#3-Fluent" class="headerlink" title="3. Fluent"></a>3. Fluent</h3><p>除了提供了可以被轻松包含到 xml 布局中的文本格式绑定外， MvvmCross 还提供了可以轻松的使用 c#格式代码构造绑定的方法，被称为 <code>Fluent</code> 绑定。</p>
<p>请看一个例子：</p>
<ul>
<li>使用文本绑定：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Text TweetText,</span><br><span class="line"></span><br><span class="line">    Converter=RemainingLength,</span><br><span class="line"></span><br><span class="line">    ConverterParameter=140</span><br></pre></td></tr></table></figure>

<ul>
<li>可以使用 fluent 绑定：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">this.CreateBinding(label)</span><br><span class="line"></span><br><span class="line">    .For(l =&gt; l.Text)</span><br><span class="line"></span><br><span class="line">    .To(vm =&gt; vm.TweetText)</span><br><span class="line"></span><br><span class="line">    .WithConversion(&quot;RemainingLength&quot;, 140);</span><br></pre></td></tr></table></figure>

<p>Fluent 绑定在 IOS 和 OSX 平台上很有用， 因为 xml 而已不容易修改。</p>
<h3 id="4-Tibet-Rio-和未来"><a href="#4-Tibet-Rio-和未来" class="headerlink" title="4. Tibet, Rio 和未来"></a>4. Tibet, Rio 和未来</h3><p>MvvmCross 的数据绑定格式从最初的 json，经过 Swiss 和 Fluent 的演化，在表现上有了重大的改善。这些改进主要改善的开发人员的开发效率，而没有改变任何功能和对数据绑定的理解。</p>
<p>在未来，MvvmCross 将会继续改进数据绑定的表现，同时也会致力于改进数据绑定的功能性。<br>当前的改进和增强主要表现在：</p>
<ul>
<li>Tibet 绑定<ul>
<li>多绑定</li>
<li>组合绑定</li>
<li>字面绑定</li>
<li>绑定宏</li>
<li>值转换器和值组合器的函数表达</li>
<li>嵌套值转换</li>
</ul>
</li>
<li>Rio 绑定</li>
<li>自动命令绑定</li>
</ul>
<p>使用这些特性， 这样的绑定：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Text TweetText,</span><br><span class="line"></span><br><span class="line">    Converter=RemainingLength,</span><br><span class="line"></span><br><span class="line">    ConverterParameter=140</span><br></pre></td></tr></table></figure>

<p>可以被写成：<br><code>Text RemainingLength(TweetText, 140)</code><br>或者：<br><code>Text 140 - Length(TweetText)</code><br>我们将会在本节的后面部分讨论这些特性和它们的开发状态。<br>除此之外，社区还会有更加丰富的新特性和改进。MvvmCross 和它的数据绑定的演化是由用户驱动的，新功能和特性来源于它们真实的用户需求。</p>
<h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON:"></a>JSON:</h3><p>如上所述，我们从 v3 开始就不再支持 json 绑定。</p>
<h3 id="Swiss"><a href="#Swiss" class="headerlink" title="Swiss"></a>Swiss</h3><p>Swiss 绑定语法允许 从一个 <code>View</code> 目标<code>$Target$</code>到一个 <code>ViewModel</code> 属性源<code>$SourcePath$</code> 被记为：<br><code>$Target$ $SourcePath$</code><br><code>$Target$</code> 必须直接指向 <code>View</code> 的一个属性，例如：</p>
<ul>
<li>Text</li>
<li>IsChecked</li>
<li>Value</li>
<li>…</li>
</ul>
<p><code>$SourcePath$</code> 可以是一个 <code>ViewModel</code> 或它的子对象的路径属性，如:</p>
<ul>
<li>UserId</li>
<li>RememberMe</li>
<li>Password</li>
<li>Customer.FirstName</li>
<li>Customer.Address.City</li>
<li>Customer.Orders[0].Date</li>
<li>Customer.Orders[0].Total</li>
<li>Customer.Cards[“Primary”].Expiry</li>
<li>Customer.Cards[“Primary”].Number</li>
<li>…</li>
</ul>
<p>除了最基础的 <code>$TargetPath$</code> 到 <code>$SourcePath$</code> 语法：</p>
<ul>
<li>如果活力 <code>$SourcePath$</code> 或只使用一个<code>.</code> ，那么使用整个 <code>ViewModel</code> 被当作源</li>
<li>如果使用转换器，它可以被添加成这样：</li>
</ul>
<p><code>, Converter=$ConverterName$</code></p>
<p><code>$ConverterName$</code> 是要使用的值转换器的名字。它通常是类名去除<code>ValueConverter</code> 后缀。例如， 类<code>LengthValueConverter</code>使用名字<code>Length</code> 。</p>
<ul>
<li>如果要添加一个转换参数，应该是：</li>
</ul>
<p><code>, ConverterParameter=$ParameterValue$</code><br><code>$ParameterValue</code> 应该是以下中的一个：</p>
<ul>
<li>单引号或双引号包含的字符串</li>
<li>null， 对应 c#的<code>null</code></li>
<li>true 或 false 对应 c#的<code>bool</code></li>
<li>整数， 将会被当作 <code>long</code></li>
<li>浮点数，对应 c#的<code>double</code></li>
<li>如果需要一个后备值，应该是这样：</li>
</ul>
<p><code>, FallbackValue=$FallbackValue$</code><br><code>$FallackValue$</code> 可以是上面<code>$ParameterValue$</code> 相同的内容，同时也可以是：</p>
<ul>
<li>枚举值的<code>ToString()</code> 返回</li>
</ul>
<p>这将很有用，例如对于 <code>Visibility</code> 属性。<br>如果需要一个特定的绑定模式应该是这样：<br><code>, Mode=$WhichMode$</code><br><code>$WhichMode$</code> 可以是以下之一：</p>
<ul>
<li><code>OneWay</code></li>
<li><code>OneWayToSource</code></li>
<li><code>TwoWay</code></li>
<li><code>OneWay</code></li>
<li><code>Default</code></li>
</ul>
<p>如果需要多绑定，可以用分号分隔。<br>Swiss 有一个特殊的扩展 <code>$CommandParameter$</code> 绑定，它为 <code>ICommand</code> 调用提供了一个内置的值转换器。应该这样使用：<br><code>, CommandParameter=$CPValue$</code><br><code>$CPValue$</code> 是一个与 <code>$ParameterValue$</code> 类似的字面值。</p>
<h3 id="Fluent"><a href="#Fluent" class="headerlink" title="Fluent"></a>Fluent</h3><p>Fluent 语法使用 c# 来创建绑定。</p>
<h3 id="MvvmCross-定义自定义绑定"><a href="#MvvmCross-定义自定义绑定" class="headerlink" title="MvvmCross 定义自定义绑定"></a>MvvmCross 定义自定义绑定</h3><h3 id="Tibet"><a href="#Tibet" class="headerlink" title="Tibet"></a>Tibet</h3><p>Tibet 扩展了 Swiss 绑定的一些特性</p>
<h3 id="Rio"><a href="#Rio" class="headerlink" title="Rio"></a>Rio</h3><p>使用 <code>ViewModel</code> ，c#中 mvvm 总是围绕着 <code>INotifyPropertyChanged</code>接口。<br>使用 c#属性实现该接口类似于：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">private string _lastName;</span><br><span class="line"></span><br><span class="line">public string LastName</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    get =&gt; _lastName;</span><br><span class="line"></span><br><span class="line">    set =&gt; SetProperty(ref _lastName, value);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这是使用 <code>ICommand</code> 接口增强行为回调的方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">private ICommand _submitCommand;</span><br><span class="line"></span><br><span class="line">public ICommand SubmitCommand</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    get</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        _submitCommand = _submitCommand ?? new MvxCommand(DoSubmit);</span><br><span class="line"></span><br><span class="line">        return _submitCommand;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这种语法对有经验的 mvvm 开发人员很容易理解，但对于很小的 视-模型 显得很冗长。<br>已经有一些开发人员使用后期注入的方式来处理这种冗长的代码，例如： 使用 Fody 的 AOP 属性插件。<br>Rio 绑定给开发人员提供一种不同的实现方式， 使用新的字段绑定和方法绑定插件</p>
<h4 id="字段绑定"><a href="#字段绑定" class="headerlink" title="字段绑定"></a>字段绑定</h4><p>使用字段绑定插件， MvvmCross 数据绑定可以使用 ViewModel 的公开字段作为数据源来绑定，例如：<br><code>public string LastName;</code></p>
<p>更进一步，为了驱动事件更新界面，添加 了一个轻型的 <code>INotifyChanged</code> 接口， 同时使用帮助接口和类 <code>INC&lt;T&gt;</code> 和<code>NC&lt;T&gt;</code>。 如下例：</p>
<p><code>public readonly INC&lt;string&gt; LastName = new NC&lt;string&gt;();</code><br>一个这样定义的<code>LastName</code> 可以和之前的 <code>INotifyPropertyChanged</code> 属性一样被绑定：<br><code>Text LastName</code><br>进一步， 内置的 <code>string</code> 字段可以被这样读取：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LastName.Value = &quot;Hello&quot;;</span><br><span class="line"></span><br><span class="line">Mvx.Trace(&quot;Current value is &#123;0&#125;&quot;, LastName.value);</span><br></pre></td></tr></table></figure>

<p>要使用 字段绑定，需要在你的 <code>core</code> 和<code>ui</code> 项目中引入 字段绑定插件。</p>
<blockquote>
<p>注意：</p>
</blockquote>
<ul>
<li><blockquote>
<p>Rio 中除了句法的改进，也包含一些性能改进- 基于反射的 get/set 和基于字符串的事件消息。</p>
</blockquote>
</li>
</ul>
<blockquote>
<p><code>INotifyChanged</code>&gt; 绑定没有办法支持 <code>INotifyPropertyChanged</code>&gt; 特性 ，由一个属性变更驱动的 “全部修改”。</p>
</blockquote>
<blockquote>
<p><code>INotifyChanged</code>&gt; 是一个非常简单的接口，所以你可以很轻松的创建你自己的扩展实现。</p>
</blockquote>
<h4 id="方法绑定"><a href="#方法绑定" class="headerlink" title="方法绑定"></a>方法绑定</h4><p>通过方法绑定插件， mvvmcross 数据绑定可以使用 <code>ViewModel</code>的公开方法作为<code>ICommand</code>数据源而不用定义 <code>ICommand</code> 属性。</p>
<p>例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public void GoHome()</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    ShowViewModel&lt;HomeViewModel&gt;();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">···</span><br><span class="line"></span><br><span class="line">可以在绑定中使用</span><br></pre></td></tr></table></figure>

<p>Click GoHome</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">要使用方法绑定，需要在`UI`工程中引入方法绑定插件。不需要在`Core` 工程中引入。</span><br><span class="line"></span><br><span class="line">&gt; 注意： 在Windows xaml 绑定有一个很重要的特性不被mvvmcross支持，就是`ICommand` 接口的`CanExecute` 和 `CanExecuteChanged` 方法。在xaml中，这个属性和事件组可以用来像按钮一样启动/禁用控件。</span><br><span class="line"></span><br><span class="line">### BindingEx, xaml中的 Tibet和Rio</span><br><span class="line"></span><br><span class="line">xaml是微软提供的平台和产品，提供了优秀的工具和大量添加新控件的扩展，但是对自定义很有限。</span><br><span class="line"></span><br><span class="line">不幸的是，这意味着 mvvmcross 不能截断正常的xaml绑定：</span><br><span class="line"></span><br><span class="line">``` xaml</span><br><span class="line"></span><br><span class="line">Text=&quot;&#123;Binding FirstName&#125;&quot;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;se-preview-section-delimiter&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>尽管如此， MvvmCross 的 Swiss, Tibet 和 Rio 绑定可以通过附加属性的方式实现。<br>尤其是 BindingEx 插件提供了两个 <code>AttatchedProperties</code> ：</p>
<ul>
<li><code>mvx:Bi.nd</code> - 为绑定</li>
<li><code>mvx:La.ng</code> - 为国际化扩展</li>
</ul>
<p>要在你的 UWP 或 WPF 应用中使用这两个扩展，</p>
<ul>
<li>包含 MvvmCross.Binging 包</li>
<li>在 <code>Setup</code> 类中添加一步来初始化 Windows 绑定框架</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<p>尽管如此， MvvmCross 的 Swiss, Tibet 和 Rio 绑定可以通过附加属性的方式实现。</p>
<p>尤其是 BindingEx 插件提供了两个 <code>AttatchedProperties</code> ：</p>
<ul>
<li><p><code>mvx:Bi.nd</code> - 为绑定</p>
</li>
<li><p><code>mvx:La.ng</code> - 为国际化扩展</p>
</li>
</ul>
<p>要在你的 UWP 或 WPF 应用中使用这两个扩展，</p>
<ul>
<li><p>包含 MvvmCross.Binging 包</p>
</li>
<li><p>在 <code>Setup</code> 类中添加一步来初始化 Windows 绑定框架</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">protected override void InitializeLastChance()</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    base.InitializeLastChance();</span><br><span class="line"></span><br><span class="line">    var builder = new MvxWindowsBindingBuilder();</span><br><span class="line"></span><br><span class="line">    builder.DoRegistration();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;se-preview-section-delimiter&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>在你的 xaml 文件中包含一个 xml 特性</li>
<li>UWP:</li>
</ul>
<p>xmlns:mvx=”using:mvx”</p>
<ul>
<li>WPF</li>
</ul>
<p>xmlns:mvx=”clr-namespace:MvvmCross.Platforms.Wpf.Binding:assembly=MvvmCross.Platforms.Wpf”</p>
<ul>
<li>在你的 xaml 中你可以像下面这样使用绑定</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>在你的 xaml 文件中包含一个 xml 特性</p>
</li>
<li><p>UWP:</p>
</li>
</ul>
<p>xmlns:mvx=”using:mvx”</p>
<ul>
<li>WPF</li>
</ul>
<p>xmlns:mvx=”clr-namespace:MvvmCross.Platforms.Wpf.Binding:assembly=MvvmCross.Platforms.Wpf”</p>
<ul>
<li>在你的 xaml 中你可以像下面这样使用绑定</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;TetBlock mvx:Bi.nd=&quot;Text Customer.FirstName; Visible=ShowFirstName&quot; /&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>为了支持设计模式 ，你也需要引入一个附加的转换器。要了解更多，请参阅 <a target="_blank" rel="noopener" href="http://slodge.blogspot.co.uk/2013/07/n35-multibinding-with-tibet-n1-videos.html">slodge 入门</a></li>
</ul>
<p>这样一来，就可以使用 <code>Swiss</code> 和<code>Tibet</code> 绑定。</p>
<div style="display: none;">@%28mvvmcross%29%5B%u7FFB%u8BD1%2C.net%2Cwpf%2Cposts%5D%0A%0A%23%20%u6570%u636E%u7ED1%u5B9A%0A%0A%u6570%u636E%u7ED1%u5B9A%u662FMVVM%u6240%u4F9D%u8D56%u7684%uFF0C%u7528%u4E8E%u7ED1%u5B9A%20%60View%60%20%u548C%60ViewModel%60%20%u7684%u5173%u952E%u6280%u672F%u3002%0A%0A%u6570%u636E%u7ED1%u5B9A%u63D0%u4F9B%u548C%u7EF4%u62A4%20%60View%60%20%u548C%60ViewModel%60%20%u4E4B%u95F4%u7684%u53CC%u5411%u8FDE%u63A5%uFF0C%u6B63%u786E%u7406%u89E3%u6570%u636E%u7ED1%u5B9A%u5BF9%u6BCF%u4E00%u4E2A%20%60MVVM%60%20%u5F00%u53D1%u8005%u90FD%u662F%u5F88%u6709%u5FC5%u8981%u7684%u3002%0A%0A%u5728%60mvvmcross%60%u4E2D%uFF0C%u5185%u7F6E%u4E86%u4E0E%20%u5FAE%u8F6F%u7684%u57FA%u4E8E%60xaml%60%u6846%u67B6%u63D0%u4F9B%u7684%u7ED3%u6784%u5BF9%u5E94%u7684%u6570%u636E%u7ED1%u5B9A%uFF0C%u4F46%u662F%u5728%u6700%u65B0%u7684%u5F00%u53D1%u8FC7%u7A0B%u4E2D%uFF0C%60mvvmcross%60%20%u5728%u65B0%u7684%u65B9%u5411%u4E0A%u6269%u5C55%u4E86%u6570%u636E%u7ED1%u5B9A%u3002%0A%0A%0A%u5728%u672C%u8282%u6211%u4EEC%u9996%u5148%u5173%u6CE8%u6838%u5FC3%u7684%20%60Windows%60%20%u6570%u636E%u7ED1%u5B9A%u4F53%u7CFB%uFF0C%u7136%u540E%u6269%u5C55%u4E86%u4E00%u4E9B%u65B0%u65B9%u6CD5%u3002%0A%0A%23%23%20%u6838%u5FC3windows%u6570%u636E%u7ED1%u5B9A%0A%0A%u5728%u672C%u7ED3%u6784%u4E2D%uFF0C%u5BF9%u4E8E%u6BCF%u4E00%u4E2A%u7ED1%u5B9A%uFF1A%0A%0A-%20%u5728%60View%60%u548C%60ViewModel%60%u4E2D%u90FD%u4F7F%u7528c%23%20%u5C5E%u6027%0A-%20%u4E00%u4E2A%u7B80%u5355%u7684%60View%60%20%u5C5E%u6027%u4E00%u5B9A%u8FDE%u63A5%u7740%u4E00%u4E2A%20%60ViewModel%60%20%u5C5E%u6027%u3002%0A-%20%u4E00%u4E2A%u6307%u5B9A%u7684%u6570%u636E%u6A21%u5F0F%u6765%u6307%u5B9A%u6570%u636E%u65B9%u5411%uFF08%u5355%u5411%u3001%u53CC%u5411%u7B49%uFF09%0A-%20%u53EF%u9009%u7684%u53EF%u4EE5%u6307%u5B9A%u4E00%u4E2A%u503C%u8F6C%u6362%u5668%uFF0C%u5B83%u4E5F%u53EF%u9009%u7684%u53EF%u53C2%u6570%u5316%0A-%20%u540C%u6837%u53EF%u9009%u7684%u53EF%u4EE5%u6307%u5B9A%u4E00%u4E2A%u5F53%u7ED1%u5B9A%u5931%u8D25%u65F6%u7684%u53CD%u9988%u3002%0A%0A%23%23%23%20c%23%20%u5C5E%u6027%u548C%u6570%u636E%u7ED1%u5B9A%20%0A%0A%u5728%60View%60%u548C%60ViewModel%60%20%u4E2D%uFF0C%u90FD%u4F7F%u7528c%23%u5C5E%u6027%u6765%u5B9E%u73B0%u6570%u636E%u7ED1%u5B9A%u3002%0A%0A%u5728%60ViewModel%60%u4E2D%uFF0C%u5C5E%u6027%u770B%u8D77%u6765%u662F%u8FD9%u4E2A%u6837%u5B50%uFF1A%0A%0A%60%60%60%20c%23%0Aprivate%20string%20_myProperty%3B%0Apublic%20string%20MyProperty%0A%7B%0A%09get%20%3D%3E%20_myProperty%3B%0A%09set%20%0A%09%7B%0A%09%09_myProperty%20%3D%20value%3B%0A%09%09RaisePropertyChanged%28%28%29%20%3D%3E%20MyProperty%29%3B%0A%09%09//%20%u8FD9%u91CC%u53EF%u4EE5%u653E%u4E00%u4E9B%u5F53%u5C5E%u6027MyProperty%u88AB%u66F4%u65B0%u65F6%u7684%u5176%u5B83%u64CD%u4F5C%u3002%0A%09%7D%0A%7D%0A%60%60%60%0A%0A%3E%20%u6CE8%u610F%uFF0C%20%u5728%u68C0%u67E5%u8FC7%u503C%u771F%u7684%u88AB%u6539%u53D8%u4E86%u4E4B%u540E%uFF0CMvvmCross%20%u63D0%u4F9B%u4E86%u8F85%u52A9%u65B9%u6CD5%u6765%u8BBE%u7F6E%u503C%u548C%u63D0%u5347%20%60PropertyChanged%60%20%u4E8B%u4EF6%u3002%u63A8%u8350%u4F7F%u7528%u5728%60MvxViewModel%60%u548C%60MvxPropertyChanged%60%u4E2D%u5B9E%u73B0%u7684%60SetProperty%uFF08%uFF09%60%20%u6765%u5B9E%u73B0%u8FD9%u4E00%u6B65%u3002%0A%0A%u5728%u8FD9%u91CC%u6211%u4EEC%u4F7F%u7528%u4E86%u4E00%u4E2A%u79C1%u6709%u7684%u540E%u53F0%u5B57%u6BB5%u6765%u5B58%u50A8%u5F53%u524D%u503C%uFF0C%u5E76%u8C03%u7528%20%60RaisePropertyChanged%60%20%u6765%u5411%u4EFB%u4F55%u76D1%u542C%u89C6%u53D1%u9001%u503C%u5DF2%u7ECF%u88AB%u6539%u53D8%u7684%u4FE1%u53F7%u3002%0A%0A%u5728%60View%60%u4E2D%uFF1A%0A%0A-%20%u5728Windows%60%u5E73%u53F0%u4E0A%uFF0C%20%u4F7F%u7528%20%60DependencyProperty%60%20%u6765%u5B58%u50A8%u53D8%u91CF%u3002%u4ECE%u6240%u5468%u77E5%uFF0C%20%60DependencyProperty%60%20%u63D0%u4F9B%u4EE5%u4E0B%u7279%u6027%uFF1A%0A%09-%20%u5728%60View%60%u4E2D%u5141%u8BB8%20%60get%60%20%u548C%60set%60%20%u64CD%u4F5C%0A%09-%20%u5728%60View%60%20%u4E2D%u76D1%u542C%u503C%u7684%u6539%u53D8%uFF0C%u4F8B%u5982%uFF1A%20%u7528%u6237%u4E3A%20%60TextBox%60%20%u8F93%u5165%u4E86%u65B0%u503C%u3002%0A%0A-%20%u5728%u65B0%u7684%20c%23%u5E73%u53F0%u5982%20%60Xamarin.Android%60%20%u548C%60Xamarin.IOS%60%3A%0A%09-%20%u7565%u8FC7%0A%0A%23%23%23%20%u5C5E%u6027%u7ED1%u5B9A%u5C5E%u6027%0A%0A%u4F7F%u7528%u4E0A%u8FF0%u7684%60View%60%u7684%60ViewModel%60%u5C5E%u6027%uFF0C%u901A%u5E38%u662F%u4E00%u4E2A%20%60ViewModel%60%u5C5E%u6027%u5BF9%u5E94%u7740%u4E00%u4E2A%60View%60%u5C5E%u6027%u7684%u503C%u3002%0A%0A%u4F8B%u5982%uFF1A%0A-%20%u5982%u679C%u4F60%u7684%u89C6%u5305%u542B%u4E00%u4E2A%60CheckBox%60%uFF0C%20%u5B83%u6709%u4E00%u4E2A%60IsChecked%60%20%u503C%0A-%20%u4F60%u7684%60ViewModel%60%20%u53EF%u4EE5%u5305%u542B%u4E00%u4E2A%u5C5E%u6027%uFF1A%0A%0A%60%60%60%20c%23%0Aprivate%20bool%20_rememberMe%3B%0Apublic%20bool%20RememberMe%0A%7B%0A%09get%20%3D%3E%20_rememberMe%3B%0A%09set%20%3D%3E%20SetProperty%28ref%20_remember%2C%20value%29%3B%0A%7D%0A%60%60%60%0A%0A-%20%u4E00%u4E2A%u6570%u636E%u7ED1%u5B9A%u53EF%u4EE5%u5C06%60View%60%u4E2D%u7684%60IsChecked%60%20%u4E0E%60ViewModel%60%u4E2D%u7684%60RememberMe%60%20%u7ED1%u5B9A%u5728%u4E00%u8D77%u3002%0A%0A%23%23%23%20%u6570%u636E%u7ED1%u5B9A%u4E8B%u4EF6%u548C%u884C%u4E3A%0A%0A%u6570%u636E%u7ED1%u5B9A%u5141%u8BB8%u4E00%u4E2A%60ViewModel%60%20%u54CD%u5E94%60View%60%u4E2D%u53D1%u751F%u7684%u4E8B%u4EF6%u3002%u4F8B%u5982%uFF0C%u5BF9%60ViewModel%60%u54CD%u5E94%u6309%u94AE%u7684%u70B9%u51FB%u4E8B%u4EF6%u3002%0A%0A%u901A%u5E38%u5B9E%u73B0%u8FD9%u4E00%u70B9%u7684%u6280%u672F%u662F%u4E3A%60ViewModel%60%u5B9E%u73B0%u4E00%u4E2A%60Command%60%u5C5E%u6027%u6765%u7ED1%u5B9A%u5230%60View%60%u7684%60Command%60%u5C5E%u6027%u3002%0A%0A%u4F8B%u5982%uFF0C%u4E00%u4E2A%60CheckBox%60%20%u6709%u4E00%u4E2A%20%60ChekckedCommand%60%u5C5E%u6027%uFF0C%u53EF%u4EE5%u7ED1%u5B9A%u5230%u4E00%u4E2A%60ViewModel%60%u7684%20%60RememberMeChangedCommand%60%u5C5E%u6027%u4E0A%u3002%0A%0A%23%23%23%20%u7ED1%u5B9A%u6A21%u5F0F%20%0A%0A%u4ECE%60View%60%u4E0A%u7ED1%u5B9A%60ViewModel%60%u4E2D%u7684%u5C5E%u6027%u4E00%u5171%u6709%u56DB%u79CD%u6A21%u5F0F%3A%0A-%20%u5355%u5411%0A-%20%u5355%u5411%u5230%u6E90%0A-%20%u53CC%u5411%0A-%20%u4E00%u6B21%u6027%0A%0A%23%23%23%23%20%u5355%u5411%0A%0A-%20%u7ED1%u5B9A%u6570%u636E%u4ECE%20%60ViewModel%60%20%u4F20%u8F93%u5230%60View%60%0A-%20%u4EFB%u4F55%u65F6%u5019%uFF0C%u5F53%60ViewModel%60%u5C5E%u6027%u53D8%u5316%u65F6%uFF0C%60View%60%u4E2D%u7684%u5C5E%u6027%u81EA%u52A8%u8C03%u6574%0A-%20%u8FD9%u79CD%u7ED1%u5B9A%u6A21%u5F0F%u901A%u5E38%u7528%u6765%u663E%u793A%uFF0C%u4F8B%u5982%uFF0C%u6570%u636E%u6765%u81EA%u52A8%u6001%u6E90%uFF0C%u6BD4%u5982%u4F20%u611F%u5668%u3001%u7F51%u7EDC%u6570%u636E%u6E90%u7B49%u3002%0A-%20%u5728Windows/xaml%uFF0C%20%u8FD9%u901A%u5E38%u662F%u9ED8%u8BA4%u7ED1%u5B9A%u6837%u5F0F%u3002%u6240%u4EE5%u5982%u679C%u6CA1%u6709%u6307%u5B9A%u5176%u5B83%u7ED1%u5B9A%u6837%u5F0F%uFF0C%u5C31%u4F7F%u7528%u6B64%u6837%u5F0F%u3002%0A%0A%23%23%23%23%20%u5355%u5411%u5230%u6E90%0A%0A-%20%u7ED1%u5B9A%u6570%u636E%u4ECE%60View%60%20%u5230%60ViewModel%60%u3002%0A-%20%u5F53%60View%60%u5C5E%u6027%u53D1%u751F%u53D8%u5316%u65F6%uFF0C%u5F71%u54CD%u5230%u7684%60ViewModel%60%u4F1A%u88AB%u66F4%u65B0%u3002%0A-%20%u8FD9%u79CD%u6A21%u5F0F%u901A%u5E38%u7528%u6765%u4ECE%u7528%u6237%u6536%u96C6%u65B0%u4FE1%u606F%uFF0C%u4F8B%u5982%20%u7528%u6237%u586B%u5199%u7A7A%u8868%u683C%u3002%0A-%20%u5B9E%u9645%u4E0A%uFF0C%u8FD9%u79CD%u6A21%u5F0F%u5F88%u5C11%u7528%uFF0C%u5927%u90E8%u5206%u5F00%u53D1%u8005%u4F1A%u9009%u62E9%u4F7F%u7528%u53CC%u5411%u6A21%u5F0F%u3002%0A%0A%23%23%23%23%20%u53CC%u5411%0A%0A-%20%u8FD9%u79CD%u6A21%u5F0F%u6570%u636E%u53CC%u5411%u540C%u6B65%0A-%20%u5728%60View%60%u548C%60ViewModel%60%20%u4E2D%u7684%u5C5E%u6027%u90FD%u4F1A%u88AB%u76D1%u542C%uFF0C%u4E00%u4E2A%u66F4%u6539%uFF0C%u53E6%u4E00%u4E2A%u90FD%u4F1A%u88AB%u66F4%u65B0%u3002%0A-%20%u8FD9%u79CD%u6A21%u5F0F%u901A%u5E38%u7528%u6765%u7F16%u8F91%u5DF2%u6709%u7684%u6761%u76EE%uFF0C%u662F%u5F00%u53D1%u4EBA%u5458%u6700%u5E38%u7528%u7684%u6A21%u5F0F%0A-%20MvvmCross%20%u5DF2%u7ECF%u521B%u5EFA%u4E86%u65B0%u7684%u7ED1%u5B9A%uFF0C%u8FD9%u5C06%u662FMvvmCross%u6700%u5E38%u7528%u7684%u6A21%u5F0F%u3002%0A%0A%23%23%23%23%20%u4E00%u6B21%u6027%0A%0A-%20%u8FD9%u79CD%u6A21%u5F0F%u5C06%u6570%u636E%u4ECE%60ViewModel%60%20%u53D1%u7ED9%60View%60%0A-%20%u8FD9%u79CD%u6A21%u5F0F%u4E0D%u76D1%u542C%60ViewModel%60%u7684%20%u6D88%u606F%u548C%u4E8B%u4EF6%0A-%20%u8FD9%u79CD%u6A21%u5F0F%u4E0B%uFF0C%u53EA%u5728%u8BBE%u7F6E%u6570%u636E%u6E90%u65F6%uFF0C%u5C1D%u8BD5%u4ECE%60ViewModel%60%20%u4F20%u8F93%u6570%u636E%u7ED9%60View%60%uFF0C%u8FD9%u79CD%u7ED1%u5B9A%u4E0D%u76D1%u542C%u4EFB%u4F55%u66F4%u6539%uFF0C%u4E5F%u4E0D%u505A%u4EFB%u4F55%u66F4%u65B0%uFF0C%u9664%u975E%u91CD%u8BBE%u4E86%u6570%u636E%u6E90%u3002%0A-%20%u8FD9%u79CD%u6A21%u5F0F%u5F88%u5C11%u7528%uFF0C%20%u4F46%u662F%u53EF%u4EE5%u7528%u5728%u521D%u59CB%u5316%u540E%u4E0D%u6253%u7B97%u518D%u66F4%u6539%u7684%u914D%u7F6E%u5C5E%u6027%u4E0A%u3002%0A-%20%u5728mvvmcross%u4E2D%uFF0C%u5F53%u4ECE%u8BED%u8A00%u6587%u4EF6%u8BFB%u53D6%u9759%u6001%u6587%u672C%u65F6%uFF0C%u6211%u4EEC%u4F7F%u7528%20%u4E00%u6B21%u6027%u7ED1%u5B9A%u3002%u8FD9%u662F%u56E0%u4E3A%uFF0C%u901A%u5E38%u6211%u4EEC%u8BA9%u7528%u6237%u9009%u62E9%u8BED%u8A00%uFF0C%u4F46%u662F%u4E00%u65E6%u9009%u5B9A%uFF0C%u7528%u6237%u5F88%u5C11%u4F1A%u53BB%u66F4%u6539%u8BED%u8A00%u3002%0A%0A%23%23%23%20%u503C%u8F6C%u6362%u5668%0A%0A%0A%20%60ValueConverter%60%20%u662F%u4E00%u4E2A%u5B9E%u73B0%u4E86%60IValueConverter%60%20%u63A5%u53E3%u7684%u7C7B%u3002%0A%0A%u8FD9%u4E2A%u63A5%u53E3%u63D0%u4F9B%u4E86%u4E24%u4E2A%u5BF9%u8C61%u7EA7%u522B%u7684%u8F6C%u6362%u65B9%u6CD5%uFF1A%0A-%20%60Convert%60%20-%20%u63D0%u4F9B%u4E86%u4E00%u4E2A%u7B80%u5355%u7684%u4ECE%60ViewModel%60%20%u5230%60View%60%20%u7684%u8F6C%u6362%u673A%u5236%0A-%20%60ConvertBack%60%20-%20%u63D0%u4F9B%u4E86%u4E00%u4E2A%u4ECE%20%60View%60%20%u8FD4%u56DE%u5230%20%60ViewModel%60%20%u7684%u8F6C%u6362%u673A%u5236%0A%0A%u6700%u5E38%u89C1%u7684%u60C5%u5F62%u662F%u53EA%u63D0%u4F9B%u4E00%u4E2A%u7528%u6765%u5728%60View%60%u4E0A%u663E%u793A%u7684%u8F6C%u6362%uFF0C%u5728%u8FD9%u79CD%u60C5%u51B5%u4E0B%uFF0C%u53EA%u9700%u8981%u5B9E%u73B0%20%60Convert%60%20%u65B9%u6CD5%u3002%0A%0A%0A%u56E0%u4E3A%20%60IValueConverter%60%20%u63A5%u53E3%u5728%u6BCF%u4E2A%u5E73%u53F0%u4E0A%u7684%u5B9E%u73B0%u5E76%u4E0D%u5B8C%u5168%u4E00%u6837%uFF0C%20MvvmCross%20%u63D0%u4F9B%u4E86%u4E00%u4E2A%u53EF%u4EE5%u5728%u6BCF%u4E2A%u5E73%u53F0%u4E0A%u6620%u5C04%u5230%20%60IValueConverter%60%u63A5%u53E3%u7684%20%60IMvxValueConvert%60%20%u63A5%u53E3%u4EE3%u66FF%u3002%0A%0A%u66F4%u8FDB%u4E00%u6B65%u7684%uFF0C%20MvvmCross%20%u63D0%u4F9B%u4E86%u4E00%u4E9B%u57FA%u7C7B%u6765%u5E2E%u52A9%u5B9E%u73B0%u8F6C%u6362%u5668%uFF1A%0A%0A-%20%60MvxValueConverter%60%0A-%20%60MvxValueConverter%3CTForm%3E%60%0A-%20%60MvxValueConverter%3CTForm%2C%20TTo%3E%60%0A%0A%u4F8B%u5982%uFF0C%u4E00%u4E2A%20%60LengthValueConverter%60%20%u7528%u6765%u663E%u793A%u5B57%u7B26%u4E32%u957F%u5EA6%uFF0C%u4E0D%u5B9E%u73B0%60ConvertBack%60%u53EF%u4EE5%u8FD9%u6837%u5B9E%u73B0%uFF1A%0A%0A%60%60%60%20c%23%0Apublic%20class%20LengthValueConverter%20%3A%20MvxValueConverter%3Cstring%2C%20int%3E%0A%7B%0A%09protected%20override%20int%20Converter%28string%20value%2C%20Type%20targetType%2C%20object%20parameter%2C%20CultureInfo%20cultureInfo%29%0A%09%7B%0A%09%09if%20%28value%20%3D%3D%20null%29%0A%09%09%09return%200%3B%0A%0A%09%09return%20value.length%3B%0A%09%7D%0A%7D%0A%60%60%60%0A%0A%u503C%u8F6C%u6362%u5668%u4E5F%u53EF%u4EE5%u5E26%u53C2%u6570%u3002%u8FD9%u901A%u5E38%u53EF%u4EE5%u4F7F%u8F6C%u6362%u5668%u5728%u4E0D%u540C%u60C5%u51B5%u4E0B%u91CD%u7528%u3002%u4F8B%u5982%uFF0C%u4E00%u4E2A%60TrimValueConverter%60%20%u53EF%u4EE5%u5E26%u6709%u9700%u8981%u6E05%u9664%u5B57%u7B26%u7684%u53C2%u6570%u3002%0A%0A%23%23%23%20%u5907%u7528%u503C%0A%0A%u6709%u65F6%uFF0C%20%60ViewModel%60%u7684%u6E90%u5C5E%u6027%u4F1A%u5931%u6548%uFF0C%u4F8B%u5982%uFF1A%0A-%20%u5047%u8BBE%u4F60%u7ED1%u5B9A%u4E86%u4E00%u4E2A%20%20%60Label%60%20%u7684%60Text%60%20%u5C5E%u6027%u5230%20%60ViewModel%60%u7684%60Customer.FirstName%60%u5C5E%u6027%u3002%0A-%20%u7136%u540E%u4F60%u6307%u5B9A%u4E86%u4E00%u4E2A%u5907%u7528%u503C%20%60FallBackValue%3D%27no%20customer%27%60%0A-%20%u4EFB%u4F55%u65F6%u5019%uFF0C%u5982%u679C%20%60Customer%60%20%u88AB%u8BBE%u4E3A%60null%60%uFF0C%20%60Customer.FirstName%60%20%u4F1A%u53D8%u4E3A%60UnsetValue%60%uFF0C%20%u56DE%u4F20%u503C%60%27no%20customer%27%60%20%u4F1A%u88AB%u663E%u793A%u3002%0A%0A%3E%20%u6CE8%u610F%uFF1A%0A%3E%20-%20%u5728%u672C%u4F8B%u4E2D%uFF0C%u5982%u679C%60Customer%60%u662F%u4E00%u4E2A%u5BF9%u8C61%uFF0C%u800C%u5C06%20%60Customer.FirstName%60%u8BBE%u4E3A%60null%60%uFF0C%20%u4E0D%u4F1A%u89E6%u53D1%u5907%u7528%u503C%u3002%u5907%u7528%u503C%u53EA%u4F1A%u9488%u5BF9%60Unset%60%20%uFF0C%u5373%u6570%u636E%u7ED1%u5B9A%u627E%u4E0D%u5230%u503C%u65F6%u4F7F%u7528%uFF0C%60null%60%u4E5F%u662F%u4E00%u4E2A%u503C%uFF0C%u5B83%u4E0D%u4F1A%u4F7F%u7528%u5907%u7528%u503C%u3002%0A%3E%20-%20%u4F1A%u89E6%u53D1%u5907%u7528%u503C%u7684%u4E00%u79CD%u60C5%u5F62%u662F%u629B%u51FA%u4E86%u5F02%u5E38%u3002%u4F8B%u5982%uFF0C%u5728%u503C%u8F6C%u6362%u5668%u4E2D%u629B%u51FA%u4E86%u5F02%u5E38%uFF0C%u7ED1%u5B9A%u673A%u5236%u4F1A%u5C06%u5F02%u5E38%u5F53%u4F5C%20%60UnsetValue%60%uFF0C%u7136%u540E%u4F7F%u7528%u540E%u5907%u503C%u3002%0A%0A%0A%23%23%23%20%u5173%u4E8EDataContext%20%0A%0A%u5728%u672C%u8282%u4E2D%uFF0C%u4F60%u53EF%u4EE5%u770B%u5230%u6211%u4EEC%u4F7F%u7528%u4E86%60View%60%u548C%60ViewModel%60%uFF0C%u4F60%u4E5F%u53EF%u4EE5%u5728%u672C%u8282%u4E2D%u548C%u4EE3%u7801%u4E2D%u770B%u5230%60DataContext%60%u3002%0A%0A%60DataContext%60%20%u662F%u4E00%u4E2A%u5728%60View%60%u4E0A%u88AB%u8D4B%u503C%20%60ViewModel%60%u7684%u7B80%u5355%20c%23%u5C5E%u6027%u540D%u3002%0A%0A%u53EF%u4EE5%u8BA4%u4E3A%20%20%60ViewModel%60%20%u548C%20%20%60DataContext%60%20%u662F%u4E00%u6837%u7684%u3002%0A%0A%23%23%20MvvmCross%20%u6570%u636E%u7ED1%u5B9A%0A%0A%u6570%u636E%u7ED1%u5B9A%u603B%u662FMvvmCross%u7684%u6838%u5FC3%uFF0C%u5E76%u4E14%u5B83%u7684%u529F%u80FD%u6027%u968F%u7740mvvmcross%u7684%u7248%u672C%u8FED%u4EE3%u66F4%u52A0%u5B8C%u5584%u3002%0A%0AMvvm%20%u6570%u636E%u7ED1%u5B9A%u7684%u8FDB%u5316%u8FC7%u7A0B%u6CBF%u7740%u4EE5%u4E0B%u8DEF%u7EBF%uFF1A%0A%0A1.%20Json%0A2.%20Swiss%0A3.%20Fluent%0A4.%20Tibet%2C%20Rio%20%u548C%u672A%u6765%u7684%0A%0A%23%23%23%201.%20Json%0A%0A%u5728%20MvvmCross%u7B2C%u4E00%u4E2A%u7248%u672C%u4E2D%u4F7F%u7528%20json%u6765%u5B58%u50A8%u6570%u636E%u7ED1%u5B9A%u3002%0A%0Ajson%u7248%u672C%u5DF2%u7ECF%u88AB%u5F03%u7528%uFF0C%20%u4ECE%20v3%20%u5F00%u59CB%u5C31%u4E0D%u518D%u4F7F%u7528%u4E86%u3002%u5982%u679C%u4F60%u5728%u4F8B%u5B50%u6216%u6587%u6863%u4E2D%u770B%u5230%20json%u7ED1%u5B9A%uFF0C%u8BF7%u6CE8%u610F%u5B83%u4EEC%u5DF2%u7ECF%u8FC7%u65F6%u4E86%0A%0A%23%23%23%202.%20Swiss%0A%0AJson%u7684%u66FF%u4EE3%u7248%u672C%u88AB%u79F0%u4E3A%20%27Swiss%27%u3002%u5B83%u63D0%u4F9B%u4E86%u4E0Ejson%u7ED1%u5B9A%u76F8%u540C%u7684%u529F%u80FD%uFF0C%u4F46%u662F%u66F4%u52A0%u6E05%u6670%u548C%u7B80%u6D01%u3002%0A%u4F8B%u5982%uFF1A%0A%0A-%20json%u7ED1%u5B9A%u662F%u8FD9%u6837%3A%0A%0A%60%60%60%20json%0A%7B%0A%09%27Text%27%3A%0A%09%7B%0A%09%09%27Path%27%20%3A%20%27TweetText%27%2C%0A%09%09%27Converter%27%20%3A%20%27RemainingLength%27%2C%0A%09%09%27ConverterParameter%27%20%3A%20140%0A%09%7D%0A%7D%0A%60%60%60%0A%0A-%20%u4F7F%u7528Swiss%uFF1A%0A%0A%60%60%60%20c%23%0AText%20TweetText%2C%0A%09Converter%3DRemainingLength%2C%0A%09ConverterParameter%3D140%0A%60%60%60%0A%0A%23%23%23%203.%20Fluent%0A%0A%u9664%u4E86%u63D0%u4F9B%u4E86%u53EF%u4EE5%u88AB%u8F7B%u677E%u5305%u542B%u5230%20xml%u5E03%u5C40%u4E2D%u7684%u6587%u672C%u683C%u5F0F%u7ED1%u5B9A%u5916%uFF0C%20MvvmCross%20%u8FD8%u63D0%u4F9B%u4E86%u53EF%u4EE5%u8F7B%u677E%u7684%u4F7F%u7528%20c%23%u683C%u5F0F%u4EE3%u7801%u6784%u9020%u7ED1%u5B9A%u7684%u65B9%u6CD5%uFF0C%u88AB%u79F0%u4E3A%20%60Fluent%60%20%u7ED1%u5B9A%u3002%0A%0A%u8BF7%u770B%u4E00%u4E2A%u4F8B%u5B50%uFF1A%0A%0A-%20%u4F7F%u7528%u6587%u672C%u7ED1%u5B9A%uFF1A%0A%0A%60%60%60%20%0AText%20TweetText%2C%0A%09Converter%3DRemainingLength%2C%0A%09ConverterParameter%3D140%0A%60%60%60%0A%0A-%20%u53EF%u4EE5%u4F7F%u7528%20fluent%u7ED1%u5B9A%uFF1A%0A%0A%60%60%60%20c%23%0Athis.CreateBinding%28label%29%0A%09.For%28l%20%3D%3E%20l.Text%29%0A%09.To%28vm%20%3D%3E%20vm.TweetText%29%0A%09.WithConversion%28%22RemainingLength%22%2C%20140%29%3B%0A%60%60%60%0A%0AFluent%20%u7ED1%u5B9A%u5728%20IOS%u548C%20OSX%20%u5E73%u53F0%u4E0A%u5F88%u6709%u7528%uFF0C%20%u56E0%u4E3A%20xml%u800C%u5DF2%u4E0D%u5BB9%u6613%u4FEE%u6539%u3002%0A%0A%23%23%23%204.%20Tibet%2C%20Rio%20%u548C%u672A%u6765%0A%0AMvvmCross%u7684%u6570%u636E%u7ED1%u5B9A%u683C%u5F0F%u4ECE%u6700%u521D%u7684%20json%uFF0C%u7ECF%u8FC7%20Swiss%u548CFluent%u7684%u6F14%u5316%uFF0C%u5728%u8868%u73B0%u4E0A%u6709%u4E86%u91CD%u5927%u7684%u6539%u5584%u3002%u8FD9%u4E9B%u6539%u8FDB%u4E3B%u8981%u6539%u5584%u7684%u5F00%u53D1%u4EBA%u5458%u7684%u5F00%u53D1%u6548%u7387%uFF0C%u800C%u6CA1%u6709%u6539%u53D8%u4EFB%u4F55%u529F%u80FD%u548C%u5BF9%u6570%u636E%u7ED1%u5B9A%u7684%u7406%u89E3%u3002%0A%0A%u5728%u672A%u6765%uFF0CMvvmCross%20%u5C06%u4F1A%u7EE7%u7EED%u6539%u8FDB%u6570%u636E%u7ED1%u5B9A%u7684%u8868%u73B0%uFF0C%u540C%u65F6%u4E5F%u4F1A%u81F4%u529B%u4E8E%u6539%u8FDB%u6570%u636E%u7ED1%u5B9A%u7684%u529F%u80FD%u6027%u3002%0A%0A%u5F53%u524D%u7684%u6539%u8FDB%u548C%u589E%u5F3A%u4E3B%u8981%u8868%u73B0%u5728%uFF1A%0A%0A-%20Tibet%u7ED1%u5B9A%0A%09-%20%u591A%u7ED1%u5B9A%0A%09-%20%u7EC4%u5408%u7ED1%u5B9A%0A%09-%20%u5B57%u9762%u7ED1%u5B9A%0A%09-%20%u7ED1%u5B9A%u5B8F%0A%09-%20%u503C%u8F6C%u6362%u5668%u548C%u503C%u7EC4%u5408%u5668%u7684%u51FD%u6570%u8868%u8FBE%0A%09-%20%u5D4C%u5957%u503C%u8F6C%u6362%0A-%20Rio%u7ED1%u5B9A%0A-%20%u81EA%u52A8%u547D%u4EE4%u7ED1%u5B9A%0A%0A%u4F7F%u7528%u8FD9%u4E9B%u7279%u6027%uFF0C%20%u8FD9%u6837%u7684%u7ED1%u5B9A%uFF1A%0A%0A%60%60%60%20c%23%0AText%20TweetText%2C%0A%09Converter%3DRemainingLength%2C%0A%09ConverterParameter%3D140%0A%60%60%60%0A%0A%u53EF%u4EE5%u88AB%u5199%u6210%uFF1A%0A%0A%60%60%60%0AText%20RemainingLength%28TweetText%2C%20140%29%0A%60%60%60%0A%0A%u6216%u8005%uFF1A%0A%0A%60%60%60%0AText%20140%20-%20Length%28TweetText%29%0A%60%60%60%0A%0A%u6211%u4EEC%u5C06%u4F1A%u5728%u672C%u8282%u7684%u540E%u9762%u90E8%u5206%u8BA8%u8BBA%u8FD9%u4E9B%u7279%u6027%u548C%u5B83%u4EEC%u7684%u5F00%u53D1%u72B6%u6001%u3002%0A%0A%u9664%u6B64%u4E4B%u5916%uFF0C%u793E%u533A%u8FD8%u4F1A%u6709%u66F4%u52A0%u4E30%u5BCC%u7684%u65B0%u7279%u6027%u548C%u6539%u8FDB%u3002MvvmCross%u548C%u5B83%u7684%u6570%u636E%u7ED1%u5B9A%u7684%u6F14%u5316%u662F%u7531%u7528%u6237%u9A71%u52A8%u7684%uFF0C%u65B0%u529F%u80FD%u548C%u7279%u6027%u6765%u6E90%u4E8E%u5B83%u4EEC%u771F%u5B9E%u7684%u7528%u6237%u9700%u6C42%u3002%0A%0A%0A%23%23%23%20JSON%3A%0A%0A%u5982%u4E0A%u6240%u8FF0%uFF0C%u6211%u4EEC%u4ECE%20v3%u5F00%u59CB%u5C31%u4E0D%u518D%u652F%u6301json%u7ED1%u5B9A%u3002%0A%0A%23%23%23%20Swiss%0A%0ASwiss%u7ED1%u5B9A%u8BED%u6CD5%u5141%u8BB8%20%u4ECE%u4E00%u4E2A%20%60View%60%20%u76EE%u6807%60%24Target%24%60%u5230%u4E00%u4E2A%20%60ViewModel%60%20%u5C5E%u6027%u6E90%60%24SourcePath%24%60%20%u88AB%u8BB0%u4E3A%uFF1A%0A%60%60%60%0A%24Target%24%20%24SourcePath%24%0A%60%60%60%0A%0A%60%24Target%24%60%20%u5FC5%u987B%u76F4%u63A5%u6307%u5411%20%60View%60%20%u7684%u4E00%u4E2A%u5C5E%u6027%uFF0C%u4F8B%u5982%uFF1A%0A%0A-%20Text%0A-%20IsChecked%0A-%20Value%0A-%20...%0A%0A%60%24SourcePath%24%60%20%u53EF%u4EE5%u662F%u4E00%u4E2A%20%60ViewModel%60%20%u6216%u5B83%u7684%u5B50%u5BF9%u8C61%u7684%u8DEF%u5F84%u5C5E%u6027%uFF0C%u5982%3A%0A%0A-%20UserId%0A-%20RememberMe%0A-%20Password%0A-%20Customer.FirstName%0A-%20Customer.Address.City%0A-%20Customer.Orders%5B0%5D.Date%0A-%20Customer.Orders%5B0%5D.Total%0A-%20Customer.Cards%5B%22Primary%22%5D.Expiry%0A-%20Customer.Cards%5B%22Primary%22%5D.Number%0A-%20...%0A%0A%u9664%u4E86%u6700%u57FA%u7840%u7684%20%60%24TargetPath%24%60%20%u5230%20%60%24SourcePath%24%60%20%u8BED%u6CD5%uFF1A%0A%0A-%20%u5982%u679C%u6D3B%u529B%20%60%24SourcePath%24%60%20%u6216%u53EA%u4F7F%u7528%u4E00%u4E2A%60.%60%20%uFF0C%u90A3%u4E48%u4F7F%u7528%u6574%u4E2A%20%60ViewModel%60%20%u88AB%u5F53%u4F5C%u6E90%0A%0A-%20%u5982%u679C%u4F7F%u7528%u8F6C%u6362%u5668%uFF0C%u5B83%u53EF%u4EE5%u88AB%u6DFB%u52A0%u6210%u8FD9%u6837%uFF1A%0A%0A%60%60%60%20%0A%2C%20Converter%3D%24ConverterName%24%0A%60%60%60%0A%0A%60%24ConverterName%24%60%20%u662F%u8981%u4F7F%u7528%u7684%u503C%u8F6C%u6362%u5668%u7684%u540D%u5B57%u3002%u5B83%u901A%u5E38%u662F%u7C7B%u540D%u53BB%u9664%60ValueConverter%60%20%u540E%u7F00%u3002%u4F8B%u5982%uFF0C%20%u7C7B%60LengthValueConverter%60%u4F7F%u7528%u540D%u5B57%60Length%60%20%u3002%0A%0A-%20%u5982%u679C%u8981%u6DFB%u52A0%u4E00%u4E2A%u8F6C%u6362%u53C2%u6570%uFF0C%u5E94%u8BE5%u662F%uFF1A%0A%0A%60%60%60%0A%2C%20ConverterParameter%3D%24ParameterValue%24%0A%60%60%60%0A%0A%60%24ParameterValue%60%20%u5E94%u8BE5%u662F%u4EE5%u4E0B%u4E2D%u7684%u4E00%u4E2A%uFF1A%0A%0A-%20%u5355%u5F15%u53F7%u6216%u53CC%u5F15%u53F7%u5305%u542B%u7684%u5B57%u7B26%u4E32%0A-%20null%uFF0C%20%u5BF9%u5E94c%23%u7684%60null%60%0A-%20true%20%u6216false%20%u5BF9%u5E94c%23%u7684%60bool%60%0A-%20%u6574%u6570%uFF0C%20%u5C06%u4F1A%u88AB%u5F53%u4F5C%20%60long%60%0A-%20%u6D6E%u70B9%u6570%uFF0C%u5BF9%u5E94c%23%u7684%60double%60%0A-%20%u5982%u679C%u9700%u8981%u4E00%u4E2A%u540E%u5907%u503C%uFF0C%u5E94%u8BE5%u662F%u8FD9%u6837%uFF1A%0A%0A%60%60%60%0A%2C%20FallbackValue%3D%24FallbackValue%24%0A%60%60%60%0A%0A%60%24FallackValue%24%60%20%u53EF%u4EE5%u662F%u4E0A%u9762%60%24ParameterValue%24%60%20%u76F8%u540C%u7684%u5185%u5BB9%uFF0C%u540C%u65F6%u4E5F%u53EF%u4EE5%u662F%uFF1A%0A%0A-%20%u679A%u4E3E%u503C%u7684%60ToString%28%29%60%20%u8FD4%u56DE%0A%0A%u8FD9%u5C06%u5F88%u6709%u7528%uFF0C%u4F8B%u5982%u5BF9%u4E8E%20%60Visibility%60%20%u5C5E%u6027%u3002%0A%0A%u5982%u679C%u9700%u8981%u4E00%u4E2A%u7279%u5B9A%u7684%u7ED1%u5B9A%u6A21%u5F0F%u5E94%u8BE5%u662F%u8FD9%u6837%uFF1A%0A%0A%60%60%60%20%0A%2C%20Mode%3D%24WhichMode%24%0A%60%60%60%0A%0A%60%24WhichMode%24%60%20%u53EF%u4EE5%u662F%u4EE5%u4E0B%u4E4B%u4E00%uFF1A%0A%0A-%20%60OneWay%60%0A-%20%60OneWayToSource%60%0A-%20%60TwoWay%60%0A-%20%60OneWay%60%0A-%20%60Default%60%0A%0A%u5982%u679C%u9700%u8981%u591A%u7ED1%u5B9A%uFF0C%u53EF%u4EE5%u7528%u5206%u53F7%u5206%u9694%u3002%0A%0ASwiss%20%u6709%u4E00%u4E2A%u7279%u6B8A%u7684%u6269%u5C55%20%60%24CommandParameter%24%60%20%u7ED1%u5B9A%uFF0C%u5B83%u4E3A%20%60ICommand%60%20%u8C03%u7528%u63D0%u4F9B%u4E86%u4E00%u4E2A%u5185%u7F6E%u7684%u503C%u8F6C%u6362%u5668%u3002%u5E94%u8BE5%u8FD9%u6837%u4F7F%u7528%uFF1A%0A%0A%60%60%60%0A%2C%20CommandParameter%3D%24CPValue%24%0A%60%60%60%0A%0A%60%24CPValue%24%60%20%u662F%u4E00%u4E2A%u4E0E%20%60%24ParameterValue%24%60%20%u7C7B%u4F3C%u7684%u5B57%u9762%u503C%u3002%0A%0A%0A%0A%0A%0A%0A%23%23%23%20Fluent%0A%0AFluent%20%u8BED%u6CD5%u4F7F%u7528c%23%20%u6765%u521B%u5EFA%u7ED1%u5B9A%u3002%0A%0A%23%23%23%20MvvmCross%u5B9A%u4E49%u81EA%u5B9A%u4E49%u7ED1%u5B9A%0A%0A%0A%23%23%23%20Tibet%0A%0ATibet%20%u6269%u5C55%u4E86%20Swiss%u7ED1%u5B9A%u7684%u4E00%u4E9B%u7279%u6027%0A%0A%23%23%23%20Rio%0A%0A%u4F7F%u7528%20%60ViewModel%60%20%uFF0Cc%23%u4E2Dmvvm%u603B%u662F%u56F4%u7ED5%u7740%20%60INotifyPropertyChanged%60%u63A5%u53E3%u3002%0A%0A%u4F7F%u7528c%23%u5C5E%u6027%u5B9E%u73B0%u8BE5%u63A5%u53E3%u7C7B%u4F3C%u4E8E%uFF1A%0A%0A%60%60%60%20c%23%0Aprivate%20string%20_lastName%3B%0Apublic%20string%20LastName%0A%7B%0A%09get%20%3D%3E%20_lastName%3B%0A%09set%20%3D%3E%20SetProperty%28ref%20_lastName%2C%20value%29%3B%0A%7D%0A%60%60%60%0A%0A%u8FD9%u662F%u4F7F%u7528%20%60ICommand%60%20%u63A5%u53E3%u589E%u5F3A%u884C%u4E3A%u56DE%u8C03%u7684%u65B9%u5F0F%uFF1A%0A%0A%60%60%60%20c%23%0Aprivate%20ICommand%20_submitCommand%3B%0Apublic%20ICommand%20SubmitCommand%0A%7B%0A%09get%0A%09%7B%0A%09%09_submitCommand%20%3D%20_submitCommand%20%3F%3F%20new%20MvxCommand%28DoSubmit%29%3B%0A%09%09return%20_submitCommand%3B%0A%09%7D%0A%7D%0A%0A%60%60%60%0A%0A%u8FD9%u79CD%u8BED%u6CD5%u5BF9%u6709%u7ECF%u9A8C%u7684%20mvvm%u5F00%u53D1%u4EBA%u5458%u5F88%u5BB9%u6613%u7406%u89E3%uFF0C%u4F46%u5BF9%u4E8E%u5F88%u5C0F%u7684%20%u89C6-%u6A21%u578B%20%u663E%u5F97%u5F88%u5197%u957F%u3002%0A%0A%u5DF2%u7ECF%u6709%u4E00%u4E9B%u5F00%u53D1%u4EBA%u5458%u4F7F%u7528%u540E%u671F%u6CE8%u5165%u7684%u65B9%u5F0F%u6765%u5904%u7406%u8FD9%u79CD%u5197%u957F%u7684%u4EE3%u7801%uFF0C%u4F8B%u5982%uFF1A%20%u4F7F%u7528%20Fody%u7684AOP%20%u5C5E%u6027%u63D2%u4EF6%u3002%0A%0ARio%20%u7ED1%u5B9A%u7ED9%u5F00%u53D1%u4EBA%u5458%u63D0%u4F9B%u4E00%u79CD%u4E0D%u540C%u7684%u5B9E%u73B0%u65B9%u5F0F%uFF0C%20%u4F7F%u7528%u65B0%u7684%u5B57%u6BB5%u7ED1%u5B9A%u548C%u65B9%u6CD5%u7ED1%u5B9A%u63D2%u4EF6%0A%0A%23%23%23%23%20%u5B57%u6BB5%u7ED1%u5B9A%0A%0A%u4F7F%u7528%u5B57%u6BB5%u7ED1%u5B9A%u63D2%u4EF6%uFF0C%20MvvmCross%u6570%u636E%u7ED1%u5B9A%u53EF%u4EE5%u4F7F%u7528%20ViewModel%u7684%u516C%u5F00%u5B57%u6BB5%u4F5C%u4E3A%u6570%u636E%u6E90%u6765%u7ED1%u5B9A%uFF0C%u4F8B%u5982%uFF1A%0A%0A%60%60%60%20c%23%0Apublic%20string%20LastName%3B%0A%60%60%60%0A%0A%u66F4%u8FDB%u4E00%u6B65%uFF0C%u4E3A%u4E86%u9A71%u52A8%u4E8B%u4EF6%u66F4%u65B0%u754C%u9762%uFF0C%u6DFB%u52A0%20%u4E86%u4E00%u4E2A%u8F7B%u578B%u7684%20%60INotifyChanged%60%20%u63A5%u53E3%uFF0C%20%u540C%u65F6%u4F7F%u7528%u5E2E%u52A9%u63A5%u53E3%u548C%u7C7B%20%60INC%3CT%3E%60%20%u548C%60NC%3CT%3E%60%u3002%20%u5982%u4E0B%u4F8B%uFF1A%0A%0A%60%60%60c%23%0Apublic%20readonly%20INC%3Cstring%3E%20LastName%20%3D%20new%20NC%3Cstring%3E%28%29%3B%0A%60%60%60%0A%0A%u4E00%u4E2A%u8FD9%u6837%u5B9A%u4E49%u7684%60LastName%60%20%u53EF%u4EE5%u548C%u4E4B%u524D%u7684%20%60INotifyPropertyChanged%60%20%u5C5E%u6027%u4E00%u6837%u88AB%u7ED1%u5B9A%uFF1A%0A%0A%60%60%60%0AText%20LastName%0A%60%60%60%0A%0A%u8FDB%u4E00%u6B65%uFF0C%20%u5185%u7F6E%u7684%20%60string%60%20%u5B57%u6BB5%u53EF%u4EE5%u88AB%u8FD9%u6837%u8BFB%u53D6%uFF1A%0A%0A%60%60%60%20c%23%0ALastName.Value%20%3D%20%22Hello%22%3B%0AMvx.Trace%28%22Current%20value%20is%20%7B0%7D%22%2C%20LastName.value%29%3B%0A%60%60%60%0A%0A%u8981%u4F7F%u7528%20%u5B57%u6BB5%u7ED1%u5B9A%uFF0C%u9700%u8981%u5728%u4F60%u7684%20%60core%60%20%u548C%60ui%60%20%u9879%u76EE%u4E2D%u5F15%u5165%20%u5B57%u6BB5%u7ED1%u5B9A%u63D2%u4EF6%u3002%0A%0A%0A%3E%20%u6CE8%u610F%uFF1A%0A%3E%20%20-%20Rio%u4E2D%u9664%u4E86%u53E5%u6CD5%u7684%u6539%u8FDB%uFF0C%u4E5F%u5305%u542B%u4E00%u4E9B%u6027%u80FD%u6539%u8FDB-%20%u57FA%u4E8E%u53CD%u5C04%u7684%20get/set%20%u548C%u57FA%u4E8E%u5B57%u7B26%u4E32%u7684%u4E8B%u4EF6%u6D88%u606F%u3002%0A%3E%20%20%60INotifyChanged%60%20%u7ED1%u5B9A%u6CA1%u6709%u529E%u6CD5%u652F%u6301%20%60INotifyPropertyChanged%60%20%u7279%u6027%20%uFF0C%u7531%u4E00%u4E2A%u5C5E%u6027%u53D8%u66F4%u9A71%u52A8%u7684%20%u201C%u5168%u90E8%u4FEE%u6539%u201D%u3002%0A%3E%20%20%60INotifyChanged%60%20%u662F%u4E00%u4E2A%u975E%u5E38%u7B80%u5355%u7684%u63A5%u53E3%uFF0C%u6240%u4EE5%u4F60%u53EF%u4EE5%u5F88%u8F7B%u677E%u7684%u521B%u5EFA%u4F60%u81EA%u5DF1%u7684%u6269%u5C55%u5B9E%u73B0%u3002%0A%0A%23%23%23%23%20%u65B9%u6CD5%u7ED1%u5B9A%0A%0A%0A%u901A%u8FC7%u65B9%u6CD5%u7ED1%u5B9A%u63D2%u4EF6%uFF0C%20mvvmcross%20%u6570%u636E%u7ED1%u5B9A%u53EF%u4EE5%u4F7F%u7528%20%60ViewModel%60%u7684%u516C%u5F00%u65B9%u6CD5%u4F5C%u4E3A%60ICommand%60%u6570%u636E%u6E90%u800C%u4E0D%u7528%u5B9A%u4E49%20%60ICommand%60%20%u5C5E%u6027%u3002%0A%0A%u4F8B%u5982%uFF1A%0A%60%60%60%20c%23%0Apublic%20void%20GoHome%28%29%0A%7B%0A%09ShowViewModel%3CHomeViewModel%3E%28%29%3B%0A%7D%0A%B7%B7%B7%0A%0A%u53EF%u4EE5%u5728%u7ED1%u5B9A%u4E2D%u4F7F%u7528%0A%0A%60%60%60%20%0AClick%20GoHome%0A%60%60%60%0A%0A%u8981%u4F7F%u7528%u65B9%u6CD5%u7ED1%u5B9A%uFF0C%u9700%u8981%u5728%60UI%60%u5DE5%u7A0B%u4E2D%u5F15%u5165%u65B9%u6CD5%u7ED1%u5B9A%u63D2%u4EF6%u3002%u4E0D%u9700%u8981%u5728%60Core%60%20%u5DE5%u7A0B%u4E2D%u5F15%u5165%u3002%0A%0A%3E%20%u6CE8%u610F%uFF1A%20%u5728Windows%20xaml%20%u7ED1%u5B9A%u6709%u4E00%u4E2A%u5F88%u91CD%u8981%u7684%u7279%u6027%u4E0D%u88ABmvvmcross%u652F%u6301%uFF0C%u5C31%u662F%60ICommand%60%20%u63A5%u53E3%u7684%60CanExecute%60%20%u548C%20%60CanExecuteChanged%60%20%u65B9%u6CD5%u3002%u5728xaml%u4E2D%uFF0C%u8FD9%u4E2A%u5C5E%u6027%u548C%u4E8B%u4EF6%u7EC4%u53EF%u4EE5%u7528%u6765%u50CF%u6309%u94AE%u4E00%u6837%u542F%u52A8/%u7981%u7528%u63A7%u4EF6%u3002%0A%0A%23%23%23%20BindingEx%2C%20xaml%u4E2D%u7684%20Tibet%u548CRio%0A%0Axaml%u662F%u5FAE%u8F6F%u63D0%u4F9B%u7684%u5E73%u53F0%u548C%u4EA7%u54C1%uFF0C%u63D0%u4F9B%u4E86%u4F18%u79C0%u7684%u5DE5%u5177%u548C%u5927%u91CF%u6DFB%u52A0%u65B0%u63A7%u4EF6%u7684%u6269%u5C55%uFF0C%u4F46%u662F%u5BF9%u81EA%u5B9A%u4E49%u5F88%u6709%u9650%u3002%0A%0A%u4E0D%u5E78%u7684%u662F%uFF0C%u8FD9%u610F%u5473%u7740%20mvvmcross%20%u4E0D%u80FD%u622A%u65AD%u6B63%u5E38%u7684xaml%u7ED1%u5B9A%uFF1A%0A%0A%60%60%60%20xaml%0AText%3D%22%7BBinding%20FirstName%7D%22%0A%60%60%60%0A%0A%u5C3D%u7BA1%u5982%u6B64%uFF0C%20MvvmCross%u7684%20Swiss%2C%20Tibet%u548CRio%u7ED1%u5B9A%u53EF%u4EE5%u901A%u8FC7%u9644%u52A0%u5C5E%u6027%u7684%u65B9%u5F0F%u5B9E%u73B0%u3002%0A%0A%u5C24%u5176%u662FBindingEx%u63D2%u4EF6%u63D0%u4F9B%u4E86%u4E24%u4E2A%20%60AttatchedProperties%60%20%uFF1A%0A-%20%60mvx%3ABi.nd%60%20-%20%u4E3A%u7ED1%u5B9A%0A-%20%60mvx%3ALa.ng%60%20-%20%u4E3A%u56FD%u9645%u5316%u6269%u5C55%0A%0A%u8981%u5728%u4F60%u7684%20UWP%20%u6216%20WPF%20%u5E94%u7528%u4E2D%u4F7F%u7528%u8FD9%u4E24%u4E2A%u6269%u5C55%uFF0C%0A-%20%u5305%u542B%20MvvmCross.Binging%20%u5305%0A-%20%u5728%20%60Setup%60%20%u7C7B%u4E2D%u6DFB%u52A0%u4E00%u6B65%u6765%u521D%u59CB%u5316%20Windows%u7ED1%u5B9A%u6846%u67B6%0A%0A%60%60%60%20c%23%0Aprotected%20override%20void%20InitializeLastChance%28%29%0A%7B%0A%09base.InitializeLastChance%28%29%3B%0A%09var%20builder%20%3D%20new%20MvxWindowsBindingBuilder%28%29%3B%0A%09builder.DoRegistration%28%29%3B%0A%7D%0A%60%60%60%0A%0A-%20%u5728%u4F60%u7684xaml%20%u6587%u4EF6%u4E2D%u5305%u542B%u4E00%u4E2A%20xml%u7279%u6027%0A-%20UWP%3A%0A%0Axmlns%3Amvx%3D%22using%3Amvx%22%0A%0A-%20WPF%0A%0Axmlns%3Amvx%3D%22clr-namespace%3AMvvmCross.Platforms.Wpf.Binding%3Aassembly%3DMvvmCross.Platforms.Wpf%22%0A%0A-%20%u5728%u4F60%u7684xaml%u4E2D%u4F60%u53EF%u4EE5%u50CF%u4E0B%u9762%u8FD9%u6837%u4F7F%u7528%u7ED1%u5B9A%0A%0A%60%60%60%20xaml%0A%3CTetBlock%20mvx%3ABi.nd%3D%22Text%20Customer.FirstName%3B%20Visible%3DShowFirstName%22%20/%3E%0A%60%60%60%0A%0A-%20%u4E3A%u4E86%u652F%u6301%u8BBE%u8BA1%u6A21%u5F0F%20%uFF0C%u4F60%u4E5F%u9700%u8981%u5F15%u5165%u4E00%u4E2A%u9644%u52A0%u7684%u8F6C%u6362%u5668%u3002%u8981%u4E86%u89E3%u66F4%u591A%uFF0C%u8BF7%u53C2%u9605%20%5Bslodge%u5165%u95E8%5D%28http%3A//slodge.blogspot.co.uk/2013/07/n35-multibinding-with-tibet-n1-videos.html%29%0A%0A%u8FD9%u6837%u4E00%u6765%uFF0C%u5C31%u53EF%u4EE5%u4F7F%u7528%20%60Swiss%60%20%u548C%60Tibet%60%20%u7ED1%u5B9A%u3002%0A</div>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://ytianxia6.github.io/2020/03/10/ec15d3f8a66142d08bb0a3cbf7fa7789/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yhl">
      <meta itemprop="description" content="记录作者的一些历程，很杂乱，涉及很广...我也不知道我会什么">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haroon的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/10/ec15d3f8a66142d08bb0a3cbf7fa7789/" class="post-title-link" itemprop="url">将python嵌入到另一个应用程序</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-03-11 07:45:53 / 修改时间：08:16:47" itemprop="dateCreated datePublished" datetime="2020-03-11T07:45:53+08:00">2020-03-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><s><a target="_blank" rel="noopener" href="http://maxiang.info/#/?provider=evernote&guid=32fba36c-4d7a-44fd-8e16-055912e09d75&notebook=python">Edit</a></s></p>
<h1 id="将-python-嵌入到另一个应用程序"><a href="#将-python-嵌入到另一个应用程序" class="headerlink" title="将 python 嵌入到另一个应用程序"></a>将 python 嵌入到另一个应用程序</h1><p>python 官方文档： <a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3/extending/embedding.html">Embedding Python in Another Application</a></p>
<p>前面的章节讨论了如何扩展 Python，即如何通过将 C 函数库附加到 Python 来扩展 Python 的功能。 也可以通过其他方式做到这一点：通过将 Python 嵌入到 C / C ++应用程序中来丰富 C / C ++应用程序。 嵌入使您的应用程序能够用 Python 而非 C 或 C ++实现应用程序的某些功能。 这可以用于许多目的。 一个示例是允许用户通过使用 Python 编写一些脚本来根据自己的需求定制应用程序。 如果某些功能可以更轻松地用 Python 编写，那么您也可以自己使用它。</p>
<p>嵌入 Python 与扩展 Python 类似，但不完全相同。 不同之处在于，当您扩展 Python 时，应用程序的主程序仍然是 Python 解释器，而如果您嵌入 Python，则主程序可能与 Python 无关—相反，应用程序的某些部分有时会调用 Python 解释器运行一些 Python 代码。</p>
<p>因此，如果您要嵌入 Python，那么您将提供自己的主程序。 这个主程序要做的一件事就是初始化 Python 解释器。 至少，您必须调用函数 Py_Initialize（）。 有一些可选的调用，可将命令行参数传递给 Python。 然后，您可以从应用程序的任何部分调用解释器。</p>
<p>调用解释器有几种不同的方法：您可以将包含 Python 语句的字符串传递给 PyRun_SimpleString()，或者可以将 stdio 文件指针和文件名（仅用于错误消息中的标识）传递给 PyRun_SimpleFile()。您还可以调用前面各章中描述的较低级别的操作来构造和使用 Python 对象。</p>
<blockquote>
<p>也可以看看</p>
</blockquote>
<blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.python.org/3/c-api/index.html#c-api-index">&gt; Python / C API 参考手册</a>&gt;</p>
</blockquote>
</blockquote>
<blockquote>
<p>本手册中提供了 Python C 接口的详细信息。在这里可以找到大量必要的信息。</p>
</blockquote>
<h2 id="1-1-高层嵌入"><a href="#1-1-高层嵌入" class="headerlink" title="1.1 高层嵌入"></a>1.1 高层嵌入</h2><p>嵌入 Python 的最简单形式是使用非常高级的接口。该接口旨在执行 Python 脚本，而无需直接与应用程序进行交互。例如，这可用于对文件执行某些操作。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#define PY_SSIZE_T_CLEAN</span><br><span class="line"></span><br><span class="line">#include &lt;Python.h&gt;</span><br><span class="line"></span><br><span class="line">int</span><br><span class="line"></span><br><span class="line">main(int argc, char *argv[])</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    wchar_t *program = Py_DecodeLocale(argv[0], NULL);</span><br><span class="line"></span><br><span class="line">    if (program == NULL) &#123;</span><br><span class="line"></span><br><span class="line">        fprintf(stderr, &quot;Fatal error: cannot decode argv[0]\n&quot;);</span><br><span class="line"></span><br><span class="line">        exit(1);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Py_SetProgramName(program);  /* optional but recommended */</span><br><span class="line"></span><br><span class="line">    Py_Initialize();</span><br><span class="line"></span><br><span class="line">    PyRun_SimpleString(&quot;from time import time,ctime\n&quot;</span><br><span class="line"></span><br><span class="line">                       &quot;print(&#x27;Today is&#x27;, ctime(time()))\n&quot;);</span><br><span class="line"></span><br><span class="line">    if (Py_FinalizeEx() &lt; 0) &#123;</span><br><span class="line"></span><br><span class="line">        exit(120);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    PyMem_RawFree(program);</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在<code>Py_Initialize()</code> 之前调用<code>Py_SetProgramName()</code> 来告知解释器有关 Python 运行时库的路径 。接下来，使用<code>Py_Initialize()</code>初始化 Python 解释器 ，然后执行打印日期和时间的<code>Python</code>脚本。之后，调用<code>Py_FinalizeEx()</code>关闭解释器，然后结束程序。在实际程序中，您可能希望从其他来源（可能是文本编辑器例程，文件或数据库）获取 Python 脚本。使用<code>PyRun_SimpleFile()</code> 函数可以更好地从文件中获取<code>Python</code>代码，从而避免了分配内存空间和加载文件内容的麻烦。</p>
<h2 id="1-2-高层嵌入缺陷：概述"><a href="#1-2-高层嵌入缺陷：概述" class="headerlink" title="1.2 高层嵌入缺陷：概述"></a>1.2 高层嵌入缺陷：概述</h2><p>高级接口使您能够从应用程序中执行任意的<code>Python</code>代码，但是至少可以说，交换数据非常麻烦。如果有需要，应该使用较低级别的调用。以必须编写更多的 C 代码为代价，您几乎可以实现任何目标。</p>
<p>应该注意的是，尽管意图不同，但扩展 Python 和嵌入 Python 是完全相同的活动。前几章讨论的大多数主题仍然有效。为了说明这一点，请考虑一下从 Python 到 C 的扩展代码的实际作用：</p>
<ol>
<li> 将数据值从<code>Python</code>转换为<code>C</code></li>
<li> 使用转换后的值执行对<code>C</code>例程的函数调用，然后</li>
<li> 将调用中的数据值从<code>C</code>转换为<code>Python</code></li>
</ol>
<p>嵌入 Python 时，接口代码执行以下操作：</p>
<ol>
<li> 将数据值从 C 转换为 Python，</li>
<li> 使用转换后的值执行对 Python 接口例程的函数调用，以及</li>
<li> 将调用中的数据值从 Python 转换为 C。</li>
</ol>
<p>如您所见，只需转换数据转换步骤即可适应跨语言传输的不同方向。唯一的区别是两次数据转换之间调用的例程。扩展时，您调用 C 例程，嵌入时，您调用 Python 例程。</p>
<p>本章将不讨论如何将数据从 Python 转换为 C，反之亦然。而且，假定理解了正确使用参考文献和处理错误。由于这些方面与扩展解释器没有什么不同，因此可以参考前面的章节以获取所需的信息。</p>
<h2 id="1-3-单纯嵌入"><a href="#1-3-单纯嵌入" class="headerlink" title="1.3 单纯嵌入"></a>1.3 单纯嵌入</h2><p>第一个程序旨在在 Python 脚本中执行功能。就像在有关高级界面的部分中一样，Python 解释器不会直接与应用程序进行交互（但是在下一部分中会有所变化）。<br>运行 Python 脚本中定义的函数的代码为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;Python.h&gt;</span><br><span class="line"></span><br><span class="line">int</span><br><span class="line"></span><br><span class="line">main(int argc, char *argv[])</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    PyObject *pName, *pModule, *pFunc;</span><br><span class="line"></span><br><span class="line">    PyObject *pArgs, *pValue;</span><br><span class="line"></span><br><span class="line">    int i;</span><br><span class="line"></span><br><span class="line">    if (argc &lt; 3) &#123;</span><br><span class="line"></span><br><span class="line">        fprintf(stderr,&quot;Usage: call pythonfile funcname [args]\n&quot;);</span><br><span class="line"></span><br><span class="line">        return 1;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Py_Initialize();</span><br><span class="line"></span><br><span class="line">    pName = PyUnicode_DecodeFSDefault(argv[1]);</span><br><span class="line"></span><br><span class="line">    /* Error checking of pName left out */</span><br><span class="line"></span><br><span class="line">    pModule = PyImport_Import(pName);</span><br><span class="line"></span><br><span class="line">    Py_DECREF(pName);</span><br><span class="line"></span><br><span class="line">    if (pModule != NULL) &#123;</span><br><span class="line"></span><br><span class="line">        pFunc = PyObject_GetAttrString(pModule, argv[2]);</span><br><span class="line"></span><br><span class="line">        /* pFunc is a new reference */</span><br><span class="line"></span><br><span class="line">        if (pFunc &amp;&amp; PyCallable_Check(pFunc)) &#123;</span><br><span class="line"></span><br><span class="line">            pArgs = PyTuple_New(argc - 3);</span><br><span class="line"></span><br><span class="line">            for (i = 0; i &lt; argc - 3; ++i) &#123;</span><br><span class="line"></span><br><span class="line">                pValue = PyLong_FromLong(atoi(argv[i + 3]));</span><br><span class="line"></span><br><span class="line">                if (!pValue) &#123;</span><br><span class="line"></span><br><span class="line">                    Py_DECREF(pArgs);</span><br><span class="line"></span><br><span class="line">                    Py_DECREF(pModule);</span><br><span class="line"></span><br><span class="line">                    fprintf(stderr, &quot;Cannot convert argument\n&quot;);</span><br><span class="line"></span><br><span class="line">                    return 1;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                /* pValue reference stolen here: */</span><br><span class="line"></span><br><span class="line">                PyTuple_SetItem(pArgs, i, pValue);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            pValue = PyObject_CallObject(pFunc, pArgs);</span><br><span class="line"></span><br><span class="line">            Py_DECREF(pArgs);</span><br><span class="line"></span><br><span class="line">            if (pValue != NULL) &#123;</span><br><span class="line"></span><br><span class="line">                printf(&quot;Result of call: %ld\n&quot;, PyLong_AsLong(pValue));</span><br><span class="line"></span><br><span class="line">                Py_DECREF(pValue);</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            else &#123;</span><br><span class="line"></span><br><span class="line">                Py_DECREF(pFunc);</span><br><span class="line"></span><br><span class="line">                Py_DECREF(pModule);</span><br><span class="line"></span><br><span class="line">                PyErr_Print();</span><br><span class="line"></span><br><span class="line">                fprintf(stderr,&quot;Call failed\n&quot;);</span><br><span class="line"></span><br><span class="line">                return 1;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        else &#123;</span><br><span class="line"></span><br><span class="line">            if (PyErr_Occurred())</span><br><span class="line"></span><br><span class="line">                PyErr_Print();</span><br><span class="line"></span><br><span class="line">            fprintf(stderr, &quot;Cannot find function \&quot;%s\&quot;\n&quot;, argv[2]);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Py_XDECREF(pFunc);</span><br><span class="line"></span><br><span class="line">        Py_DECREF(pModule);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    else &#123;</span><br><span class="line"></span><br><span class="line">        PyErr_Print();</span><br><span class="line"></span><br><span class="line">        fprintf(stderr, &quot;Failed to load \&quot;%s\&quot;\n&quot;, argv[1]);</span><br><span class="line"></span><br><span class="line">        return 1;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    if (Py_FinalizeEx() &lt; 0) &#123;</span><br><span class="line"></span><br><span class="line">        return 120;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此代码加载 Python 脚本<code>argv[1]</code>，并调用函数<code>argv[2]</code>。它的整数参数是 argv 数组的其他值。如果编译并链接该程序（让我们调用完成的可执行调用），然后使用它执行 Python 脚本，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">def multiply(a,b):</span><br><span class="line"></span><br><span class="line">    print(&quot;Will compute&quot;, a, &quot;times&quot;, b)</span><br><span class="line"></span><br><span class="line">    c = 0</span><br><span class="line"></span><br><span class="line">    for i in range(0, a):</span><br><span class="line"></span><br><span class="line">        c = c + b</span><br><span class="line"></span><br><span class="line">    return c</span><br></pre></td></tr></table></figure>

<p>那么结果应该是:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ call multiply multiply 3 2</span><br><span class="line"></span><br><span class="line">Will compute 3 times 2</span><br><span class="line"></span><br><span class="line">Result of call: 6</span><br></pre></td></tr></table></figure>

<p>尽管该程序的功能非常庞大，但大多数代码都是用于 Python 和 C 之间的数据转换以及错误报告。关于嵌入 Python 我们关心的部分始于</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Py_Initialize();</span><br><span class="line"></span><br><span class="line">pName = PyUnicode_DecodeFSDefault(argv[1]);</span><br><span class="line"></span><br><span class="line">/* Error checking of pName left out */</span><br><span class="line"></span><br><span class="line">pModule = PyImport_Import(pName);</span><br></pre></td></tr></table></figure>

<p>解释器初始化以后，使用<code>PyImport_Import()</code> 加载脚本。这个函数需要一个<code>Python字符串</code>作为参数，这个字符串使用<code>PyUnicode_FromString()</code>函数转换得到。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">pFunc = PyObject_GetAttrString(pModule, argv[2]);</span><br><span class="line"></span><br><span class="line">/* pFunc is a new reference */</span><br><span class="line"></span><br><span class="line">if (pFunc &amp;&amp; PyCallable_Check(pFunc)) &#123;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Py_XDECREF(pFunc);</span><br></pre></td></tr></table></figure>

<p>加载脚本后，将使用<code>PyObject_GetAttrString()</code>查找所需的名称。如果名称存在，并且返回的对象是可调用的，则可以安全地假定它是一个函数。然后程序通过正常构造参数元组继续进行。然后使用以下命令调用<code>Python函数</code>：</p>
<p><code>pValue = PyObject_CallObject(pFunc, pArgs);</code><br>函数返回时，pValue 是 NULL 或包含对函数返回值的引用。检查值之后，请确保释放引用。</p>
<h2 id="1-4-扩展嵌入-python"><a href="#1-4-扩展嵌入-python" class="headerlink" title="1.4 扩展嵌入 python"></a>1.4 扩展嵌入 python</h2><p>到目前为止，嵌入式 Python 解释器无法从应用程序本身访问功能。Python API 通过扩展嵌入式解释器来实现这一点。也就是说，嵌入式解释器将使用应用程序提供的接口进行扩展。虽然听起来很复杂，其实还好。只需暂时忘记应用程序启动 Python 解释器。相反，应将应用程序视为一组子例程，并编写一些粘合代码以使 Python 可以访问这些例程，就像编写普通的 Python 扩展一样。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">static int numargs=0;</span><br><span class="line"></span><br><span class="line">/* Return the number of arguments of the application command line */</span><br><span class="line"></span><br><span class="line">static PyObject*</span><br><span class="line"></span><br><span class="line">emb_numargs(PyObject *self, PyObject *args)</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    if(!PyArg_ParseTuple(args, &quot;:numargs&quot;))</span><br><span class="line"></span><br><span class="line">        return NULL;</span><br><span class="line"></span><br><span class="line">    return PyLong_FromLong(numargs);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">static PyMethodDef EmbMethods[] = &#123;</span><br><span class="line"></span><br><span class="line">    &#123;&quot;numargs&quot;, emb_numargs, METH_VARARGS,</span><br><span class="line"></span><br><span class="line">     &quot;Return the number of arguments received by the process.&quot;&#125;,</span><br><span class="line"></span><br><span class="line">    &#123;NULL, NULL, 0, NULL&#125;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">static PyModuleDef EmbModule = &#123;</span><br><span class="line"></span><br><span class="line">    PyModuleDef_HEAD_INIT, &quot;emb&quot;, NULL, -1, EmbMethods,</span><br><span class="line"></span><br><span class="line">    NULL, NULL, NULL, NULL</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">static PyObject*</span><br><span class="line"></span><br><span class="line">PyInit_emb(void)</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    return PyModule_Create(&amp;EmbModule);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在 main()函数上方插入上面的代码。另外，在调用<code>Py_Initialize()</code>之前插入以下两个语句：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">numargs = argc;</span><br><span class="line"></span><br><span class="line">PyImport_AppendInittab(&quot;emb&quot;, &amp;PyInit_emb);</span><br></pre></td></tr></table></figure>

<p>这两行初始化<code>numargs</code>变量，并使<code>emb.numargs()</code>嵌入式 Python 解释器可以访问该 函数。通过这些扩展，Python 脚本可以执行以下操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import emb</span><br><span class="line"></span><br><span class="line">print(&quot;Number of arguments&quot;, emb.numargs())</span><br></pre></td></tr></table></figure>

<p>在实际的应用程序中，这些方法会将应用程序的 API 公开给 Python。</p>
<h2 id="1-5-嵌入-c"><a href="#1-5-嵌入-c" class="headerlink" title="1.5 嵌入 c++"></a>1.5 嵌入 c++</h2><p>也可以将 Python 嵌入 C ++程序中。确切的说，这将取决于所使用的 C ++系统的细节。通常，您将需要用 C ++编写主程序，并使用 C ++编译器来编译和链接程序。无需使用 C ++重新编译 Python 本身。</p>
<h2 id="1-6-在-Unix-系统下编译和链接"><a href="#1-6-在-Unix-系统下编译和链接" class="headerlink" title="1.6 在 Unix 系统下编译和链接"></a>1.6 在 Unix 系统下编译和链接</h2><p>略过</p>
<div style="display: none;">@%28python%29%5Bposts%2C%20python%2C%20%u8D44%u6599%u7FFB%u8BD1%5D%0A%0A%23%20%u5C06python%u5D4C%u5165%u5230%u53E6%u4E00%u4E2A%u5E94%u7528%u7A0B%u5E8F%0A%0Apython%u5B98%u65B9%u6587%u6863%uFF1A%20%5BEmbedding%20Python%20in%20Another%20Application%5D%28https%3A//docs.python.org/zh-cn/3/extending/embedding.html%29%0A%0A%u524D%u9762%u7684%u7AE0%u8282%u8BA8%u8BBA%u4E86%u5982%u4F55%u6269%u5C55Python%uFF0C%u5373%u5982%u4F55%u901A%u8FC7%u5C06C%u51FD%u6570%u5E93%u9644%u52A0%u5230Python%u6765%u6269%u5C55Python%u7684%u529F%u80FD%u3002%20%u4E5F%u53EF%u4EE5%u901A%u8FC7%u5176%u4ED6%u65B9%u5F0F%u505A%u5230%u8FD9%u4E00%u70B9%uFF1A%u901A%u8FC7%u5C06Python%u5D4C%u5165%u5230C%20/%20C%20++%u5E94%u7528%u7A0B%u5E8F%u4E2D%u6765%u4E30%u5BCCC%20/%20C%20++%u5E94%u7528%u7A0B%u5E8F%u3002%20%u5D4C%u5165%u4F7F%u60A8%u7684%u5E94%u7528%u7A0B%u5E8F%u80FD%u591F%u7528Python%u800C%u975EC%u6216C%20++%u5B9E%u73B0%u5E94%u7528%u7A0B%u5E8F%u7684%u67D0%u4E9B%u529F%u80FD%u3002%20%u8FD9%u53EF%u4EE5%u7528%u4E8E%u8BB8%u591A%u76EE%u7684%u3002%20%u4E00%u4E2A%u793A%u4F8B%u662F%u5141%u8BB8%u7528%u6237%u901A%u8FC7%u4F7F%u7528Python%u7F16%u5199%u4E00%u4E9B%u811A%u672C%u6765%u6839%u636E%u81EA%u5DF1%u7684%u9700%u6C42%u5B9A%u5236%u5E94%u7528%u7A0B%u5E8F%u3002%20%u5982%u679C%u67D0%u4E9B%u529F%u80FD%u53EF%u4EE5%u66F4%u8F7B%u677E%u5730%u7528Python%u7F16%u5199%uFF0C%u90A3%u4E48%u60A8%u4E5F%u53EF%u4EE5%u81EA%u5DF1%u4F7F%u7528%u5B83%u3002%0A%0A%u5D4C%u5165Python%u4E0E%u6269%u5C55Python%u7C7B%u4F3C%uFF0C%u4F46%u4E0D%u5B8C%u5168%u76F8%u540C%u3002%20%u4E0D%u540C%u4E4B%u5904%u5728%u4E8E%uFF0C%u5F53%u60A8%u6269%u5C55Python%u65F6%uFF0C%u5E94%u7528%u7A0B%u5E8F%u7684%u4E3B%u7A0B%u5E8F%u4ECD%u7136%u662FPython%u89E3%u91CA%u5668%uFF0C%u800C%u5982%u679C%u60A8%u5D4C%u5165Python%uFF0C%u5219%u4E3B%u7A0B%u5E8F%u53EF%u80FD%u4E0EPython%u65E0%u5173---%u76F8%u53CD%uFF0C%u5E94%u7528%u7A0B%u5E8F%u7684%u67D0%u4E9B%u90E8%u5206%u6709%u65F6%u4F1A%u8C03%u7528%20Python%u89E3%u91CA%u5668%u8FD0%u884C%u4E00%u4E9BPython%u4EE3%u7801%u3002%0A%0A%u56E0%u6B64%uFF0C%u5982%u679C%u60A8%u8981%u5D4C%u5165Python%uFF0C%u90A3%u4E48%u60A8%u5C06%u63D0%u4F9B%u81EA%u5DF1%u7684%u4E3B%u7A0B%u5E8F%u3002%20%u8FD9%u4E2A%u4E3B%u7A0B%u5E8F%u8981%u505A%u7684%u4E00%u4EF6%u4E8B%u5C31%u662F%u521D%u59CB%u5316Python%u89E3%u91CA%u5668%u3002%20%u81F3%u5C11%uFF0C%u60A8%u5FC5%u987B%u8C03%u7528%u51FD%u6570Py_Initialize%uFF08%uFF09%u3002%20%u6709%u4E00%u4E9B%u53EF%u9009%u7684%u8C03%u7528%uFF0C%u53EF%u5C06%u547D%u4EE4%u884C%u53C2%u6570%u4F20%u9012%u7ED9Python%u3002%20%u7136%u540E%uFF0C%u60A8%u53EF%u4EE5%u4ECE%u5E94%u7528%u7A0B%u5E8F%u7684%u4EFB%u4F55%u90E8%u5206%u8C03%u7528%u89E3%u91CA%u5668%u3002%0A%0A%u8C03%u7528%u89E3%u91CA%u5668%u6709%u51E0%u79CD%u4E0D%u540C%u7684%u65B9%u6CD5%uFF1A%u60A8%u53EF%u4EE5%u5C06%u5305%u542BPython%u8BED%u53E5%u7684%u5B57%u7B26%u4E32%u4F20%u9012%u7ED9PyRun_SimpleString%28%29%uFF0C%u6216%u8005%u53EF%u4EE5%u5C06stdio%u6587%u4EF6%u6307%u9488%u548C%u6587%u4EF6%u540D%uFF08%u4EC5%u7528%u4E8E%u9519%u8BEF%u6D88%u606F%u4E2D%u7684%u6807%u8BC6%uFF09%u4F20%u9012%u7ED9PyRun_SimpleFile%28%29%u3002%u60A8%u8FD8%u53EF%u4EE5%u8C03%u7528%u524D%u9762%u5404%u7AE0%u4E2D%u63CF%u8FF0%u7684%u8F83%u4F4E%u7EA7%u522B%u7684%u64CD%u4F5C%u6765%u6784%u9020%u548C%u4F7F%u7528Python%u5BF9%u8C61%u3002%0A%0A%3E%20%u4E5F%u53EF%u4EE5%u770B%u770B%0A%5BPython%20/%20C%20API%u53C2%u8003%u624B%u518C%5D%28https%3A//docs.python.org/3/c-api/index.html%23c-api-index%29%0A%u672C%u624B%u518C%u4E2D%u63D0%u4F9B%u4E86Python%20C%u63A5%u53E3%u7684%u8BE6%u7EC6%u4FE1%u606F%u3002%u5728%u8FD9%u91CC%u53EF%u4EE5%u627E%u5230%u5927%u91CF%u5FC5%u8981%u7684%u4FE1%u606F%u3002%0A%0A%23%23%201.1%20%20%u9AD8%u5C42%u5D4C%u5165%0A%u5D4C%u5165Python%u7684%u6700%u7B80%u5355%u5F62%u5F0F%u662F%u4F7F%u7528%u975E%u5E38%u9AD8%u7EA7%u7684%u63A5%u53E3%u3002%u8BE5%u63A5%u53E3%u65E8%u5728%u6267%u884CPython%u811A%u672C%uFF0C%u800C%u65E0%u9700%u76F4%u63A5%u4E0E%u5E94%u7528%u7A0B%u5E8F%u8FDB%u884C%u4EA4%u4E92%u3002%u4F8B%u5982%uFF0C%u8FD9%u53EF%u7528%u4E8E%u5BF9%u6587%u4EF6%u6267%u884C%u67D0%u4E9B%u64CD%u4F5C%u3002%0A%0A%60%60%60%20c++%0A%23define%20PY_SSIZE_T_CLEAN%0A%23include%20%3CPython.h%3E%0A%0Aint%0Amain%28int%20argc%2C%20char%20*argv%5B%5D%29%0A%7B%0A%20%20%20%20wchar_t%20*program%20%3D%20Py_DecodeLocale%28argv%5B0%5D%2C%20NULL%29%3B%0A%20%20%20%20if%20%28program%20%3D%3D%20NULL%29%20%7B%0A%20%20%20%20%20%20%20%20fprintf%28stderr%2C%20%22Fatal%20error%3A%20cannot%20decode%20argv%5B0%5D%5Cn%22%29%3B%0A%20%20%20%20%20%20%20%20exit%281%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20Py_SetProgramName%28program%29%3B%20%20/*%20optional%20but%20recommended%20*/%0A%20%20%20%20Py_Initialize%28%29%3B%0A%20%20%20%20PyRun_SimpleString%28%22from%20time%20import%20time%2Cctime%5Cn%22%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22print%28%27Today%20is%27%2C%20ctime%28time%28%29%29%29%5Cn%22%29%3B%0A%20%20%20%20if%20%28Py_FinalizeEx%28%29%20%3C%200%29%20%7B%0A%20%20%20%20%20%20%20%20exit%28120%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20PyMem_RawFree%28program%29%3B%0A%20%20%20%20return%200%3B%0A%7D%0A%60%60%60%0A%0A%u5728%60Py_Initialize%28%29%60%20%u4E4B%u524D%u8C03%u7528%60Py_SetProgramName%28%29%60%20%u6765%u544A%u77E5%u89E3%u91CA%u5668%u6709%u5173Python%u8FD0%u884C%u65F6%u5E93%u7684%u8DEF%u5F84%20%u3002%u63A5%u4E0B%u6765%uFF0C%u4F7F%u7528%60Py_Initialize%28%29%60%u521D%u59CB%u5316Python%u89E3%u91CA%u5668%20%uFF0C%u7136%u540E%u6267%u884C%u6253%u5370%u65E5%u671F%u548C%u65F6%u95F4%u7684%60Python%60%u811A%u672C%u3002%u4E4B%u540E%uFF0C%u8C03%u7528%60Py_FinalizeEx%28%29%60%u5173%u95ED%u89E3%u91CA%u5668%uFF0C%u7136%u540E%u7ED3%u675F%u7A0B%u5E8F%u3002%u5728%u5B9E%u9645%u7A0B%u5E8F%u4E2D%uFF0C%u60A8%u53EF%u80FD%u5E0C%u671B%u4ECE%u5176%u4ED6%u6765%u6E90%uFF08%u53EF%u80FD%u662F%u6587%u672C%u7F16%u8F91%u5668%u4F8B%u7A0B%uFF0C%u6587%u4EF6%u6216%u6570%u636E%u5E93%uFF09%u83B7%u53D6Python%u811A%u672C%u3002%u4F7F%u7528%60PyRun_SimpleFile%28%29%60%20%u51FD%u6570%u53EF%u4EE5%u66F4%u597D%u5730%u4ECE%u6587%u4EF6%u4E2D%u83B7%u53D6%60Python%60%u4EE3%u7801%uFF0C%u4ECE%u800C%u907F%u514D%u4E86%u5206%u914D%u5185%u5B58%u7A7A%u95F4%u548C%u52A0%u8F7D%u6587%u4EF6%u5185%u5BB9%u7684%u9EBB%u70E6%u3002%0A%0A%23%23%201.2%20%u9AD8%u5C42%u5D4C%u5165%u7F3A%u9677%uFF1A%u6982%u8FF0%0A%0A%u9AD8%u7EA7%u63A5%u53E3%u4F7F%u60A8%u80FD%u591F%u4ECE%u5E94%u7528%u7A0B%u5E8F%u4E2D%u6267%u884C%u4EFB%u610F%u7684%60Python%60%u4EE3%u7801%uFF0C%u4F46%u662F%u81F3%u5C11%u53EF%u4EE5%u8BF4%uFF0C%u4EA4%u6362%u6570%u636E%u975E%u5E38%u9EBB%u70E6%u3002%u5982%u679C%u6709%u9700%u8981%uFF0C%u5E94%u8BE5%u4F7F%u7528%u8F83%u4F4E%u7EA7%u522B%u7684%u8C03%u7528%u3002%u4EE5%u5FC5%u987B%u7F16%u5199%u66F4%u591A%u7684C%u4EE3%u7801%u4E3A%u4EE3%u4EF7%uFF0C%u60A8%u51E0%u4E4E%u53EF%u4EE5%u5B9E%u73B0%u4EFB%u4F55%u76EE%u6807%u3002%0A%0A%u5E94%u8BE5%u6CE8%u610F%u7684%u662F%uFF0C%u5C3D%u7BA1%u610F%u56FE%u4E0D%u540C%uFF0C%u4F46%u6269%u5C55Python%u548C%u5D4C%u5165Python%u662F%u5B8C%u5168%u76F8%u540C%u7684%u6D3B%u52A8%u3002%u524D%u51E0%u7AE0%u8BA8%u8BBA%u7684%u5927%u591A%u6570%u4E3B%u9898%u4ECD%u7136%u6709%u6548%u3002%u4E3A%u4E86%u8BF4%u660E%u8FD9%u4E00%u70B9%uFF0C%u8BF7%u8003%u8651%u4E00%u4E0B%u4ECEPython%u5230C%u7684%u6269%u5C55%u4EE3%u7801%u7684%u5B9E%u9645%u4F5C%u7528%uFF1A%0A%0A1.%20%u5C06%u6570%u636E%u503C%u4ECE%60Python%60%u8F6C%u6362%u4E3A%60C%60%0A%0A2.%20%u4F7F%u7528%u8F6C%u6362%u540E%u7684%u503C%u6267%u884C%u5BF9%60C%60%u4F8B%u7A0B%u7684%u51FD%u6570%u8C03%u7528%uFF0C%u7136%u540E%0A%0A3.%20%u5C06%u8C03%u7528%u4E2D%u7684%u6570%u636E%u503C%u4ECE%60C%60%u8F6C%u6362%u4E3A%60Python%60%0A%0A%0A%u5D4C%u5165Python%u65F6%uFF0C%u63A5%u53E3%u4EE3%u7801%u6267%u884C%u4EE5%u4E0B%u64CD%u4F5C%uFF1A%0A%0A1.%20%u5C06%u6570%u636E%u503C%u4ECEC%u8F6C%u6362%u4E3APython%uFF0C%0A%0A2.%20%u4F7F%u7528%u8F6C%u6362%u540E%u7684%u503C%u6267%u884C%u5BF9Python%u63A5%u53E3%u4F8B%u7A0B%u7684%u51FD%u6570%u8C03%u7528%uFF0C%u4EE5%u53CA%0A%0A3.%20%u5C06%u8C03%u7528%u4E2D%u7684%u6570%u636E%u503C%u4ECEPython%u8F6C%u6362%u4E3AC%u3002%0A%0A%u5982%u60A8%u6240%u89C1%uFF0C%u53EA%u9700%u8F6C%u6362%u6570%u636E%u8F6C%u6362%u6B65%u9AA4%u5373%u53EF%u9002%u5E94%u8DE8%u8BED%u8A00%u4F20%u8F93%u7684%u4E0D%u540C%u65B9%u5411%u3002%u552F%u4E00%u7684%u533A%u522B%u662F%u4E24%u6B21%u6570%u636E%u8F6C%u6362%u4E4B%u95F4%u8C03%u7528%u7684%u4F8B%u7A0B%u3002%u6269%u5C55%u65F6%uFF0C%u60A8%u8C03%u7528C%u4F8B%u7A0B%uFF0C%u5D4C%u5165%u65F6%uFF0C%u60A8%u8C03%u7528Python%u4F8B%u7A0B%u3002%0A%0A%u672C%u7AE0%u5C06%u4E0D%u8BA8%u8BBA%u5982%u4F55%u5C06%u6570%u636E%u4ECEPython%u8F6C%u6362%u4E3AC%uFF0C%u53CD%u4E4B%u4EA6%u7136%u3002%u800C%u4E14%uFF0C%u5047%u5B9A%u7406%u89E3%u4E86%u6B63%u786E%u4F7F%u7528%u53C2%u8003%u6587%u732E%u548C%u5904%u7406%u9519%u8BEF%u3002%u7531%u4E8E%u8FD9%u4E9B%u65B9%u9762%u4E0E%u6269%u5C55%u89E3%u91CA%u5668%u6CA1%u6709%u4EC0%u4E48%u4E0D%u540C%uFF0C%u56E0%u6B64%u53EF%u4EE5%u53C2%u8003%u524D%u9762%u7684%u7AE0%u8282%u4EE5%u83B7%u53D6%u6240%u9700%u7684%u4FE1%u606F%u3002%0A%0A%23%23%201.3%20%u5355%u7EAF%u5D4C%u5165%0A%0A%0A%u7B2C%u4E00%u4E2A%u7A0B%u5E8F%u65E8%u5728%u5728Python%u811A%u672C%u4E2D%u6267%u884C%u529F%u80FD%u3002%u5C31%u50CF%u5728%u6709%u5173%u9AD8%u7EA7%u754C%u9762%u7684%u90E8%u5206%u4E2D%u4E00%u6837%uFF0CPython%u89E3%u91CA%u5668%u4E0D%u4F1A%u76F4%u63A5%u4E0E%u5E94%u7528%u7A0B%u5E8F%u8FDB%u884C%u4EA4%u4E92%uFF08%u4F46%u662F%u5728%u4E0B%u4E00%u90E8%u5206%u4E2D%u4F1A%u6709%u6240%u53D8%u5316%uFF09%u3002%0A%0A%u8FD0%u884CPython%u811A%u672C%u4E2D%u5B9A%u4E49%u7684%u51FD%u6570%u7684%u4EE3%u7801%u4E3A%uFF1A%0A%0A%60%60%60%20cpp%0A%23include%20%3CPython.h%3E%0A%0Aint%0Amain%28int%20argc%2C%20char%20*argv%5B%5D%29%0A%7B%0A%20%20%20%20PyObject%20*pName%2C%20*pModule%2C%20*pFunc%3B%0A%20%20%20%20PyObject%20*pArgs%2C%20*pValue%3B%0A%20%20%20%20int%20i%3B%0A%0A%20%20%20%20if%20%28argc%20%3C%203%29%20%7B%0A%20%20%20%20%20%20%20%20fprintf%28stderr%2C%22Usage%3A%20call%20pythonfile%20funcname%20%5Bargs%5D%5Cn%22%29%3B%0A%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20Py_Initialize%28%29%3B%0A%20%20%20%20pName%20%3D%20PyUnicode_DecodeFSDefault%28argv%5B1%5D%29%3B%0A%20%20%20%20/*%20Error%20checking%20of%20pName%20left%20out%20*/%0A%0A%20%20%20%20pModule%20%3D%20PyImport_Import%28pName%29%3B%0A%20%20%20%20Py_DECREF%28pName%29%3B%0A%0A%20%20%20%20if%20%28pModule%20%21%3D%20NULL%29%20%7B%0A%20%20%20%20%20%20%20%20pFunc%20%3D%20PyObject_GetAttrString%28pModule%2C%20argv%5B2%5D%29%3B%0A%20%20%20%20%20%20%20%20/*%20pFunc%20is%20a%20new%20reference%20*/%0A%0A%20%20%20%20%20%20%20%20if%20%28pFunc%20%26%26%20PyCallable_Check%28pFunc%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20pArgs%20%3D%20PyTuple_New%28argc%20-%203%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20argc%20-%203%3B%20++i%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pValue%20%3D%20PyLong_FromLong%28atoi%28argv%5Bi%20+%203%5D%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21pValue%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Py_DECREF%28pArgs%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Py_DECREF%28pModule%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fprintf%28stderr%2C%20%22Cannot%20convert%20argument%5Cn%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20/*%20pValue%20reference%20stolen%20here%3A%20*/%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20PyTuple_SetItem%28pArgs%2C%20i%2C%20pValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20pValue%20%3D%20PyObject_CallObject%28pFunc%2C%20pArgs%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20Py_DECREF%28pArgs%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28pValue%20%21%3D%20NULL%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20printf%28%22Result%20of%20call%3A%20%25ld%5Cn%22%2C%20PyLong_AsLong%28pValue%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Py_DECREF%28pValue%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Py_DECREF%28pFunc%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Py_DECREF%28pModule%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20PyErr_Print%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fprintf%28stderr%2C%22Call%20failed%5Cn%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28PyErr_Occurred%28%29%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20PyErr_Print%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20fprintf%28stderr%2C%20%22Cannot%20find%20function%20%5C%22%25s%5C%22%5Cn%22%2C%20argv%5B2%5D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20Py_XDECREF%28pFunc%29%3B%0A%20%20%20%20%20%20%20%20Py_DECREF%28pModule%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20else%20%7B%0A%20%20%20%20%20%20%20%20PyErr_Print%28%29%3B%0A%20%20%20%20%20%20%20%20fprintf%28stderr%2C%20%22Failed%20to%20load%20%5C%22%25s%5C%22%5Cn%22%2C%20argv%5B1%5D%29%3B%0A%20%20%20%20%20%20%20%20return%201%3B%0A%20%20%20%20%7D%0A%20%20%20%20if%20%28Py_FinalizeEx%28%29%20%3C%200%29%20%7B%0A%20%20%20%20%20%20%20%20return%20120%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%200%3B%0A%7D%0A%60%60%60%0A%0A%u6B64%u4EE3%u7801%u52A0%u8F7DPython%u811A%u672C%60argv%5B1%5D%60%uFF0C%u5E76%u8C03%u7528%u51FD%u6570%60argv%5B2%5D%60%u3002%u5B83%u7684%u6574%u6570%u53C2%u6570%u662Fargv%20%u6570%u7EC4%u7684%u5176%u4ED6%u503C%u3002%u5982%u679C%u7F16%u8BD1%u5E76%u94FE%u63A5%u8BE5%u7A0B%u5E8F%uFF08%u8BA9%u6211%u4EEC%u8C03%u7528%u5B8C%u6210%u7684%u53EF%u6267%u884C%u8C03%u7528%uFF09%uFF0C%u7136%u540E%u4F7F%u7528%u5B83%u6267%u884CPython%u811A%u672C%uFF0C%u4F8B%u5982%uFF1A%0A%0A%60%60%60python%0Adef%20multiply%28a%2Cb%29%3A%0A%20%20%20%20print%28%22Will%20compute%22%2C%20a%2C%20%22times%22%2C%20b%29%0A%20%20%20%20c%20%3D%200%0A%20%20%20%20for%20i%20in%20range%280%2C%20a%29%3A%0A%20%20%20%20%20%20%20%20c%20%3D%20c%20+%20b%0A%20%20%20%20return%20c%0A%60%60%60%0A%0A%u90A3%u4E48%u7ED3%u679C%u5E94%u8BE5%u662F%3A%0A%60%60%60%20bash%0A%24%20call%20multiply%20multiply%203%202%0AWill%20compute%203%20times%202%0AResult%20of%20call%3A%206%0A%60%60%60%0A%0A%u5C3D%u7BA1%u8BE5%u7A0B%u5E8F%u7684%u529F%u80FD%u975E%u5E38%u5E9E%u5927%uFF0C%u4F46%u5927%u591A%u6570%u4EE3%u7801%u90FD%u662F%u7528%u4E8EPython%u548CC%u4E4B%u95F4%u7684%u6570%u636E%u8F6C%u6362%u4EE5%u53CA%u9519%u8BEF%u62A5%u544A%u3002%u5173%u4E8E%u5D4C%u5165Python%u6211%u4EEC%u5173%u5FC3%u7684%u90E8%u5206%u59CB%u4E8E%0A%0A%60%60%60%20cpp%0APy_Initialize%28%29%3B%0ApName%20%3D%20PyUnicode_DecodeFSDefault%28argv%5B1%5D%29%3B%0A/*%20Error%20checking%20of%20pName%20left%20out%20*/%0ApModule%20%3D%20PyImport_Import%28pName%29%3B%0A%60%60%60%0A%0A%u89E3%u91CA%u5668%u521D%u59CB%u5316%u4EE5%u540E%uFF0C%u4F7F%u7528%60PyImport_Import%28%29%60%20%u52A0%u8F7D%u811A%u672C%u3002%u8FD9%u4E2A%u51FD%u6570%u9700%u8981%u4E00%u4E2A%60Python%u5B57%u7B26%u4E32%60%u4F5C%u4E3A%u53C2%u6570%uFF0C%u8FD9%u4E2A%u5B57%u7B26%u4E32%u4F7F%u7528%60PyUnicode_FromString%28%29%60%u51FD%u6570%u8F6C%u6362%u5F97%u5230%u3002%0A%0A%60%60%60cpp%0ApFunc%20%3D%20PyObject_GetAttrString%28pModule%2C%20argv%5B2%5D%29%3B%0A/*%20pFunc%20is%20a%20new%20reference%20*/%0A%0Aif%20%28pFunc%20%26%26%20PyCallable_Check%28pFunc%29%29%20%7B%0A%20%20%20%20...%0A%7D%0APy_XDECREF%28pFunc%29%3B%0A%60%60%60%0A%0A%u52A0%u8F7D%u811A%u672C%u540E%uFF0C%u5C06%u4F7F%u7528%60%20PyObject_GetAttrString%28%29%60%u67E5%u627E%u6240%u9700%u7684%u540D%u79F0%u3002%u5982%u679C%u540D%u79F0%u5B58%u5728%uFF0C%u5E76%u4E14%u8FD4%u56DE%u7684%u5BF9%u8C61%u662F%u53EF%u8C03%u7528%u7684%uFF0C%u5219%u53EF%u4EE5%u5B89%u5168%u5730%u5047%u5B9A%u5B83%u662F%u4E00%u4E2A%u51FD%u6570%u3002%u7136%u540E%u7A0B%u5E8F%u901A%u8FC7%u6B63%u5E38%u6784%u9020%u53C2%u6570%u5143%u7EC4%u7EE7%u7EED%u8FDB%u884C%u3002%u7136%u540E%u4F7F%u7528%u4EE5%u4E0B%u547D%u4EE4%u8C03%u7528%60Python%u51FD%u6570%60%uFF1A%0A%60%60%60cpp%0ApValue%20%3D%20PyObject_CallObject%28pFunc%2C%20pArgs%29%3B%0A%0A%60%60%60%0A%0A%u51FD%u6570%u8FD4%u56DE%u65F6%uFF0CpValue%u662FNULL%u6216%u5305%u542B%u5BF9%u51FD%u6570%u8FD4%u56DE%u503C%u7684%u5F15%u7528%u3002%u68C0%u67E5%u503C%u4E4B%u540E%uFF0C%u8BF7%u786E%u4FDD%u91CA%u653E%u5F15%u7528%u3002%0A%0A%0A%23%23%201.4%20%u6269%u5C55%u5D4C%u5165python%0A%0A%u5230%u76EE%u524D%u4E3A%u6B62%uFF0C%u5D4C%u5165%u5F0FPython%u89E3%u91CA%u5668%u65E0%u6CD5%u4ECE%u5E94%u7528%u7A0B%u5E8F%u672C%u8EAB%u8BBF%u95EE%u529F%u80FD%u3002Python%20API%u901A%u8FC7%u6269%u5C55%u5D4C%u5165%u5F0F%u89E3%u91CA%u5668%u6765%u5B9E%u73B0%u8FD9%u4E00%u70B9%u3002%u4E5F%u5C31%u662F%u8BF4%uFF0C%u5D4C%u5165%u5F0F%u89E3%u91CA%u5668%u5C06%u4F7F%u7528%u5E94%u7528%u7A0B%u5E8F%u63D0%u4F9B%u7684%u63A5%u53E3%u8FDB%u884C%u6269%u5C55%u3002%u867D%u7136%u542C%u8D77%u6765%u5F88%u590D%u6742%uFF0C%u5176%u5B9E%u8FD8%u597D%u3002%u53EA%u9700%u6682%u65F6%u5FD8%u8BB0%u5E94%u7528%u7A0B%u5E8F%u542F%u52A8Python%u89E3%u91CA%u5668%u3002%u76F8%u53CD%uFF0C%u5E94%u5C06%u5E94%u7528%u7A0B%u5E8F%u89C6%u4E3A%u4E00%u7EC4%u5B50%u4F8B%u7A0B%uFF0C%u5E76%u7F16%u5199%u4E00%u4E9B%u7C98%u5408%u4EE3%u7801%u4EE5%u4F7FPython%u53EF%u4EE5%u8BBF%u95EE%u8FD9%u4E9B%u4F8B%u7A0B%uFF0C%u5C31%u50CF%u7F16%u5199%u666E%u901A%u7684Python%u6269%u5C55%u4E00%u6837%u3002%u4F8B%u5982%uFF1A%0A%0A%60%60%60%20cpp%0Astatic%20int%20numargs%3D0%3B%0A%0A/*%20Return%20the%20number%20of%20arguments%20of%20the%20application%20command%20line%20*/%0Astatic%20PyObject*%0Aemb_numargs%28PyObject%20*self%2C%20PyObject%20*args%29%0A%7B%0A%20%20%20%20if%28%21PyArg_ParseTuple%28args%2C%20%22%3Anumargs%22%29%29%0A%20%20%20%20%20%20%20%20return%20NULL%3B%0A%20%20%20%20return%20PyLong_FromLong%28numargs%29%3B%0A%7D%0A%0Astatic%20PyMethodDef%20EmbMethods%5B%5D%20%3D%20%7B%0A%20%20%20%20%7B%22numargs%22%2C%20emb_numargs%2C%20METH_VARARGS%2C%0A%20%20%20%20%20%22Return%20the%20number%20of%20arguments%20received%20by%20the%20process.%22%7D%2C%0A%20%20%20%20%7BNULL%2C%20NULL%2C%200%2C%20NULL%7D%0A%7D%3B%0A%0Astatic%20PyModuleDef%20EmbModule%20%3D%20%7B%0A%20%20%20%20PyModuleDef_HEAD_INIT%2C%20%22emb%22%2C%20NULL%2C%20-1%2C%20EmbMethods%2C%0A%20%20%20%20NULL%2C%20NULL%2C%20NULL%2C%20NULL%0A%7D%3B%0A%0Astatic%20PyObject*%0APyInit_emb%28void%29%0A%7B%0A%20%20%20%20return%20PyModule_Create%28%26EmbModule%29%3B%0A%7D%0A%60%60%60%0A%0A%u5728main%28%29%u51FD%u6570%u4E0A%u65B9%u63D2%u5165%u4E0A%u9762%u7684%u4EE3%u7801%u3002%u53E6%u5916%uFF0C%u5728%u8C03%u7528%60Py_Initialize%28%29%60%u4E4B%u524D%u63D2%u5165%u4EE5%u4E0B%u4E24%u4E2A%u8BED%u53E5%uFF1A%0A%0A%60%60%60cpp%0Anumargs%20%3D%20argc%3B%0APyImport_AppendInittab%28%22emb%22%2C%20%26PyInit_emb%29%3B%0A%60%60%60%0A%0A%u8FD9%u4E24%u884C%u521D%u59CB%u5316%60numargs%60%u53D8%u91CF%uFF0C%u5E76%u4F7F%60emb.numargs%28%29%60%u5D4C%u5165%u5F0FPython%u89E3%u91CA%u5668%u53EF%u4EE5%u8BBF%u95EE%u8BE5%20%u51FD%u6570%u3002%u901A%u8FC7%u8FD9%u4E9B%u6269%u5C55%uFF0CPython%u811A%u672C%u53EF%u4EE5%u6267%u884C%u4EE5%u4E0B%u64CD%u4F5C%0A%0A%60%60%60cpp%0Aimport%20emb%0Aprint%28%22Number%20of%20arguments%22%2C%20emb.numargs%28%29%29%0A%60%60%60%0A%0A%u5728%u5B9E%u9645%u7684%u5E94%u7528%u7A0B%u5E8F%u4E2D%uFF0C%u8FD9%u4E9B%u65B9%u6CD5%u4F1A%u5C06%u5E94%u7528%u7A0B%u5E8F%u7684API%u516C%u5F00%u7ED9Python%u3002%0A%0A%23%23%201.5%20%u5D4C%u5165c++%0A%0A%u4E5F%u53EF%u4EE5%u5C06Python%u5D4C%u5165C%20++%u7A0B%u5E8F%u4E2D%u3002%u786E%u5207%u7684%u8BF4%uFF0C%u8FD9%u5C06%u53D6%u51B3%u4E8E%u6240%u4F7F%u7528%u7684C%20++%u7CFB%u7EDF%u7684%u7EC6%u8282%u3002%u901A%u5E38%uFF0C%u60A8%u5C06%u9700%u8981%u7528C%20++%u7F16%u5199%u4E3B%u7A0B%u5E8F%uFF0C%u5E76%u4F7F%u7528C%20++%u7F16%u8BD1%u5668%u6765%u7F16%u8BD1%u548C%u94FE%u63A5%u7A0B%u5E8F%u3002%u65E0%u9700%u4F7F%u7528C%20++%u91CD%u65B0%u7F16%u8BD1Python%u672C%u8EAB%u3002%0A%0A%23%23%201.6%20%u5728Unix%u7CFB%u7EDF%u4E0B%u7F16%u8BD1%u548C%u94FE%u63A5%0A%0A%u7565%u8FC7%0A%0A</div>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://ytianxia6.github.io/2019/11/27/69a5586a2ea84ec9aee690f9257b87ab/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yhl">
      <meta itemprop="description" content="记录作者的一些历程，很杂乱，涉及很广...我也不知道我会什么">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haroon的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/27/69a5586a2ea84ec9aee690f9257b87ab/" class="post-title-link" itemprop="url">Centos7 防火墙操作</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-11-27 11:10:20" itemprop="dateCreated datePublished" datetime="2019-11-27T11:10:20+08:00">2019-11-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2019-12-10 07:22:42" itemprop="dateModified" datetime="2019-12-10T07:22:42+08:00">2019-12-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><s><a target="_blank" rel="noopener" href="http://maxiang.info/#/?provider=evernote&guid=6ddf4bc0-2684-47a4-9fa8-1a6bcb84e8cb&notebook=blog">Edit</a></s></p>
<h1 id="Centos7-防火墙操作"><a href="#Centos7-防火墙操作" class="headerlink" title="Centos7 防火墙操作"></a>Centos7 防火墙操作</h1><h2 id="1-打开端口"><a href="#1-打开端口" class="headerlink" title="1. 打开端口"></a>1. 打开端口</h2><p><code>firewall-cmd --zone=public --add-port=80/tcp --permanent</code></p>
<h2 id="2-重启防火墙"><a href="#2-重启防火墙" class="headerlink" title="2. 重启防火墙"></a>2. 重启防火墙</h2><p><code>systemctl restart firewalld.service</code></p>
<h2 id="3-查看所有端口"><a href="#3-查看所有端口" class="headerlink" title="3. 查看所有端口"></a>3. 查看所有端口</h2><p><code>firewall-cmd --permanent --zone=public --list-ports </code></p>
<h2 id="4-查看-centos7-端口占用情况："><a href="#4-查看-centos7-端口占用情况：" class="headerlink" title="4. 查看 centos7 端口占用情况："></a>4. 查看 centos7 端口占用情况：</h2><p><code>netstat -antup</code></p>
<div style="display: none;">@%28blog%29%5Bposts%2C%20centos7%5D%0A%23%20Centos7%20%u9632%u706B%u5899%u64CD%u4F5C%0A%0A%23%23%201.%20%u6253%u5F00%u7AEF%u53E3%0A%0A%60%60%60%20bash%0Afirewall-cmd%20--zone%3Dpublic%20--add-port%3D80/tcp%20--permanent%0A%60%60%60%0A%0A%23%23%202.%20%u91CD%u542F%u9632%u706B%u5899%0A%60%60%60%20bash%0Asystemctl%20restart%20firewalld.service%0A%60%60%60%0A%0A%23%23%203.%20%u67E5%u770B%u6240%u6709%u7AEF%u53E3%0A%60%60%60bash%0Afirewall-cmd%20--permanent%20--zone%3Dpublic%20--list-ports%20%0A%60%60%60%0A%0A%23%23%204.%20%u67E5%u770Bcentos7%u7AEF%u53E3%u5360%u7528%u60C5%u51B5%uFF1A%0A%0A%60%60%60%20bash%0Anetstat%20-antup%0A%60%60%60</div>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://ytianxia6.github.io/2019/09/10/fa1feac0e6694ff0b8eba5128f2498cb/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yhl">
      <meta itemprop="description" content="记录作者的一些历程，很杂乱，涉及很广...我也不知道我会什么">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haroon的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/10/fa1feac0e6694ff0b8eba5128f2498cb/" class="post-title-link" itemprop="url">搜索中文字符串</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-09-10 09:00:59" itemprop="dateCreated datePublished" datetime="2019-09-10T09:00:59+08:00">2019-09-10</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><s><a target="_blank" rel="noopener" href="http://maxiang.info/#/?provider=evernote&guid=a6c3d8fd-672e-4530-b411-019886aa9b51&notebook=blog">Edit</a></s></p>
<h1 id="搜索中文字符串"><a href="#搜索中文字符串" class="headerlink" title="搜索中文字符串"></a>搜索中文字符串</h1><p><code>&quot;.*[\u4e00-\u9fa5]&#123;1,&#125;.*&quot;</code></p>
<div style="display: none;">@%28blog%29%5Bposts%2C%20Visual%20Studio%5D%0A%0A%23%20%u641C%u7D22%u4E2D%u6587%u5B57%u7B26%u4E32%0A%0A%60%60%60%20%0A%22.*%5B%5Cu4e00-%5Cu9fa5%5D%7B1%2C%7D.*%22%0A%0A%60%60%60%0A</div>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://ytianxia6.github.io/2019/09/03/28210d878be842b6b4e43fa4ae6f032b/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yhl">
      <meta itemprop="description" content="记录作者的一些历程，很杂乱，涉及很广...我也不知道我会什么">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haroon的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/09/03/28210d878be842b6b4e43fa4ae6f032b/" class="post-title-link" itemprop="url">git 客户端</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-09-03 09:40:15 / 修改时间：10:44:45" itemprop="dateCreated datePublished" datetime="2019-09-03T09:40:15+08:00">2019-09-03</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><s><a target="_blank" rel="noopener" href="http://maxiang.info/#/?provider=evernote&guid=cd849d51-a652-4ade-a6b0-d730a24265b3&notebook=blog">Edit</a></s></p>
<h1 id="git-客户端"><a href="#git-客户端" class="headerlink" title="git 客户端"></a>git 客户端</h1><p>之前一直使用 Git + TortoiseGit + VS 组合的 git 客户端。无意中看到 Git Extensions，试用了一下，还不错，只是与 VS 的集成不那么好。但有一点，合并时可以很方便地 rebase。于是对 git 客户端比较感兴趣，试用几款。</p>
<h1 id="1-GitAtomic"><a href="#1-GitAtomic" class="headerlink" title="1. GitAtomic"></a>1. <a target="_blank" rel="noopener" href="https://gitatomic.bitbucket.io/">GitAtomic</a></h1><p>收费客户端，号称是 windows 上的终极客户端。它的安装包是放在 dropbox 上的，必须翻墙。<br><img src="/resource/1a63b0bf18aa4f7d2e54558b0f75c897." alt="Alt text"><br><img src="/resource/813726ccbf477e2b617861e8f39af43b." alt="Alt text"><br><img src="/resource/85caa44e168978ab34432e7cd13fd8fa." alt="Alt text"><br><img src="/resource/bda168143167d225cffaec74ef6db91f." alt="Alt text"><br><img src="/resource/8b314c06bcace0f06287567176052efe." alt="Alt text"><br>安装完成后打开，界面是深色的。<br><img src="/resource/55f412fb5db3b3315a5912fff388939e." alt="Alt text"><br>右上角可以调风格<br><img src="/resource/63eb3c38bad77edf98d0b06329b4aca6." alt="Alt text"><br>配置在左上角<br><img src="/resource/cea51de4a148e9926b770472f92368c2." alt="Alt text"><br>但配置中没有语言选项，所以不支持多语言。<br>在一个已经存在的仓库里右键， 点击 Manage with GitAtomic，结果打开的并不是这个仓库，而是根目录(c:)<br><img src="/resource/a3ab0c3db451553cb4a7647c429ec3d5." alt="Alt text"><br>选择 Add,添加一个仓库。可以看到，它对中文的支持不好。<br><img src="/resource/c153fa6528a0c96f36d28881264c2721." alt="Alt text"><br><img src="/resource/361598a0ed538caa5afe68441bd27e23." alt="Alt text"></p>
<h2 id="放弃"><a href="#放弃" class="headerlink" title="放弃"></a>放弃</h2><h1 id="2-SourceTree"><a href="#2-SourceTree" class="headerlink" title="2. SourceTree"></a>2. SourceTree</h1><p>SourceTree 是 Atlassian 开发的，天然更适合 Bitbucket，与 jira 深度集成。现在 SourceTree 使用还必须先登录到 Bitbucket，很不方便。</p>
<p><img src="/resource/08f74f3607e3e7de64f364085a0955b7." alt="Alt text"><br>安装过程不再截图，登录后一直下一步就好。<br>安装完成后，在目录中没有右键菜单，不能直接从目录启动。<br>需要 Add 本地仓库<br><img src="/resource/eb9a17c69ad19f1cdc7822fc14e0eaa0." alt="Alt text"><br>中文支持比较好<br><img src="/resource/02492270a2d43877fb9cad9681cd0275." alt="Alt text"><br><img src="/resource/6793ad5658e13dc770d3569e0cda0989." alt="Alt text"><br>支持工作流<br><img src="/resource/1a9c8bffb5769274c8ba41508b5b1e02." alt="Alt text"><br>SourceTree 是个很强大的工具，但它不支持与 VisualStudio 集成。并且如果不使用 Bitbucket,它总在眼前晃悠。</p>
<h1 id="3-smartGit"><a href="#3-smartGit" class="headerlink" title="3. smartGit"></a>3. smartGit</h1><p>安装完成后，会自动读取最近的 git 库，提示你是否重新打开<br><img src="/resource/a6039fe09789a44e1280277d1e2707af." alt="Alt text"><br>打开后，smartgit 会自动搜索出相近目录的仓库。<br><img src="/resource/83c0d8f22a8cec181b5563fcbe086315." alt="Alt text"><br>支持工作流，并且可选轻量工作流。这个会比较有用。<br><img src="/resource/769da203c4462e4207a014b85702fc7e." alt="Alt text"><br>有右键菜单 Open In smartGit，并且可用。不支持与 VisualStudio 集成。<br>smartGit 还能支持 svn 仓库。<br>总之，是一款很优秀的 git 客户端。问题是需要收费。</p>
<h1 id="4-TortoiseGit"><a href="#4-TortoiseGit" class="headerlink" title="4. TortoiseGit"></a>4. TortoiseGit</h1><p>对于从 TortoiseSvn 转过来的开发人员，TortoiseGit 是上手最快的，学习成本最小。一切都与 svn 相同，只是多了推送和拉取。相应的，功能也相对较弱，很多时候必须借助于 git bash 命令行。</p>
<p><img src="/resource/e7d61f0f7e617c027f4c4da74786f649." alt="Alt text"></p>
<h1 id="5-GitKraken"><a href="#5-GitKraken" class="headerlink" title="5. GitKraken"></a>5. GitKraken</h1><div style="display: none;">@%28blog%29%5Bposts%2C%20%u968F%u7B14%2Cgit%5D%0A%23%20git%20%u5BA2%u6237%u7AEF%0A%0A%u4E4B%u524D%u4E00%u76F4%u4F7F%u7528Git%20+%20TortoiseGit%20+%20VS%20%u7EC4%u5408%u7684git%u5BA2%u6237%u7AEF%u3002%u65E0%u610F%u4E2D%u770B%u5230%20Git%20Extensions%uFF0C%u8BD5%u7528%u4E86%u4E00%u4E0B%uFF0C%u8FD8%u4E0D%u9519%uFF0C%u53EA%u662F%u4E0EVS%u7684%u96C6%u6210%u4E0D%u90A3%u4E48%u597D%u3002%u4F46%u6709%u4E00%u70B9%uFF0C%u5408%u5E76%u65F6%u53EF%u4EE5%u5F88%u65B9%u4FBF%u5730%20rebase%u3002%u4E8E%u662F%u5BF9git%u5BA2%u6237%u7AEF%u6BD4%u8F83%u611F%u5174%u8DA3%uFF0C%u8BD5%u7528%u51E0%u6B3E%u3002%0A%0A%23%201.%20%5BGitAtomic%5D%28https%3A//gitatomic.bitbucket.io%29%0A%0A%u6536%u8D39%u5BA2%u6237%u7AEF%uFF0C%u53F7%u79F0%u662Fwindows%u4E0A%u7684%u7EC8%u6781%u5BA2%u6237%u7AEF%u3002%u5B83%u7684%u5B89%u88C5%u5305%u662F%u653E%u5728dropbox%u4E0A%u7684%uFF0C%u5FC5%u987B%u7FFB%u5899%u3002%0A%21%5BAlt%20text%5D%28./1567503422900.png%29%0A%21%5BAlt%20text%5D%28./1567503437921.png%29%0A%21%5BAlt%20text%5D%28./1567503450006.png%29%0A%21%5BAlt%20text%5D%28./1567503462846.png%29%0A%21%5BAlt%20text%5D%28./1567503479109.png%29%0A%0A%u5B89%u88C5%u5B8C%u6210%u540E%u6253%u5F00%uFF0C%u754C%u9762%u662F%u6DF1%u8272%u7684%u3002%0A%21%5BAlt%20text%5D%28./1567503555023.png%29%0A%u53F3%u4E0A%u89D2%u53EF%u4EE5%u8C03%u98CE%u683C%0A%21%5BAlt%20text%5D%28./1567503611241.png%29%0A%0A%u914D%u7F6E%u5728%u5DE6%u4E0A%u89D2%0A%21%5BAlt%20text%5D%28./1567503650769.png%29%0A%0A%u4F46%u914D%u7F6E%u4E2D%u6CA1%u6709%u8BED%u8A00%u9009%u9879%uFF0C%u6240%u4EE5%u4E0D%u652F%u6301%u591A%u8BED%u8A00%u3002%0A%0A%u5728%u4E00%u4E2A%u5DF2%u7ECF%u5B58%u5728%u7684%u4ED3%u5E93%u91CC%u53F3%u952E%uFF0C%20%u70B9%u51FBManage%20with%20GitAtomic%uFF0C%u7ED3%u679C%u6253%u5F00%u7684%u5E76%u4E0D%u662F%u8FD9%u4E2A%u4ED3%u5E93%uFF0C%u800C%u662F%u6839%u76EE%u5F55%28c%3A%29%0A%0A%21%5BAlt%20text%5D%28./1567503980077.png%29%0A%0A%u9009%u62E9%20Add%2C%u6DFB%u52A0%u4E00%u4E2A%u4ED3%u5E93%u3002%u53EF%u4EE5%u770B%u5230%uFF0C%u5B83%u5BF9%u4E2D%u6587%u7684%u652F%u6301%u4E0D%u597D%u3002%0A%21%5BAlt%20text%5D%28./1567504130807.png%29%0A%21%5BAlt%20text%5D%28./1567504142415.png%29%0A%0A%23%23%20%u653E%u5F03%0A%0A%23%202.%20SourceTree%0A%0ASourceTree%u662FAtlassian%u5F00%u53D1%u7684%uFF0C%u5929%u7136%u66F4%u9002%u5408%20Bitbucket%uFF0C%u4E0Ejira%u6DF1%u5EA6%u96C6%u6210%u3002%u73B0%u5728SourceTree%20%u4F7F%u7528%u8FD8%u5FC5%u987B%u5148%u767B%u5F55%u5230%20Bitbucket%uFF0C%u5F88%u4E0D%u65B9%u4FBF%u3002%0A%0A%21%5BAlt%20text%5D%28./1567504452659.png%29%0A%u5B89%u88C5%u8FC7%u7A0B%u4E0D%u518D%u622A%u56FE%uFF0C%u767B%u5F55%u540E%u4E00%u76F4%u4E0B%u4E00%u6B65%u5C31%u597D%u3002%0A%0A%u5B89%u88C5%u5B8C%u6210%u540E%uFF0C%u5728%u76EE%u5F55%u4E2D%u6CA1%u6709%u53F3%u952E%u83DC%u5355%uFF0C%u4E0D%u80FD%u76F4%u63A5%u4ECE%u76EE%u5F55%u542F%u52A8%u3002%0A%u9700%u8981%20Add%20%u672C%u5730%u4ED3%u5E93%0A%21%5BAlt%20text%5D%28./1567504824876.png%29%0A%0A%u4E2D%u6587%u652F%u6301%u6BD4%u8F83%u597D%0A%21%5BAlt%20text%5D%28./1567504872584.png%29%0A%21%5BAlt%20text%5D%28./1567504898737.png%29%0A%0A%u652F%u6301%u5DE5%u4F5C%u6D41%0A%21%5BAlt%20text%5D%28./1567505068955.png%29%0A%0ASourceTree%20%u662F%u4E2A%u5F88%u5F3A%u5927%u7684%u5DE5%u5177%uFF0C%u4F46%u5B83%u4E0D%u652F%u6301%u4E0EVisualStudio%u96C6%u6210%u3002%u5E76%u4E14%u5982%u679C%u4E0D%u4F7F%u7528%20Bitbucket%2C%u5B83%u603B%u5728%u773C%u524D%u6643%u60A0%u3002%0A%0A%23%203.%20smartGit%0A%0A%u5B89%u88C5%u5B8C%u6210%u540E%uFF0C%u4F1A%u81EA%u52A8%u8BFB%u53D6%u6700%u8FD1%u7684git%u5E93%uFF0C%u63D0%u793A%u4F60%u662F%u5426%u91CD%u65B0%u6253%u5F00%0A%21%5BAlt%20text%5D%28./1567506494775.png%29%0A%0A%u6253%u5F00%u540E%uFF0Csmartgit%u4F1A%u81EA%u52A8%u641C%u7D22%u51FA%u76F8%u8FD1%u76EE%u5F55%u7684%u4ED3%u5E93%u3002%0A%21%5BAlt%20text%5D%28./1567506550633.png%29%0A%0A%u652F%u6301%u5DE5%u4F5C%u6D41%uFF0C%u5E76%u4E14%u53EF%u9009%u8F7B%u91CF%u5DE5%u4F5C%u6D41%u3002%u8FD9%u4E2A%u4F1A%u6BD4%u8F83%u6709%u7528%u3002%0A%21%5BAlt%20text%5D%28./1567506687534.png%29%0A%0A%u6709%u53F3%u952E%u83DC%u5355%20Open%20In%20smartGit%uFF0C%u5E76%u4E14%u53EF%u7528%u3002%u4E0D%u652F%u6301%u4E0EVisualStudio%u96C6%u6210%u3002%0A%0AsmartGit%u8FD8%u80FD%u652F%u6301%20svn%u4ED3%u5E93%u3002%0A%u603B%u4E4B%uFF0C%u662F%u4E00%u6B3E%u5F88%u4F18%u79C0%u7684%20git%u5BA2%u6237%u7AEF%u3002%u95EE%u9898%u662F%u9700%u8981%u6536%u8D39%u3002%0A%0A%0A%0A%23%204.%20TortoiseGit%0A%0A%u5BF9%u4E8E%u4ECETortoiseSvn%20%u8F6C%u8FC7%u6765%u7684%u5F00%u53D1%u4EBA%u5458%uFF0CTortoiseGit%u662F%u4E0A%u624B%u6700%u5FEB%u7684%uFF0C%u5B66%u4E60%u6210%u672C%u6700%u5C0F%u3002%u4E00%u5207%u90FD%u4E0Esvn%u76F8%u540C%uFF0C%u53EA%u662F%u591A%u4E86%u63A8%u9001%u548C%u62C9%u53D6%u3002%u76F8%u5E94%u7684%uFF0C%u529F%u80FD%u4E5F%u76F8%u5BF9%u8F83%u5F31%uFF0C%u5F88%u591A%u65F6%u5019%u5FC5%u987B%u501F%u52A9%u4E8Egit%20bash%u547D%u4EE4%u884C%u3002%0A%21%5BAlt%20text%5D%28./1567506374294.png%29%0A%0A%0A%23%205.%20GitKraken%0A%0A</div>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://ytianxia6.github.io/2019/08/29/d1cb3094f88248e2b45fb645a90ff257/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="yhl">
      <meta itemprop="description" content="记录作者的一些历程，很杂乱，涉及很广...我也不知道我会什么">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Haroon的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/29/d1cb3094f88248e2b45fb645a90ff257/" class="post-title-link" itemprop="url">git 导出某一次之后的提交</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-08-29 08:29:01" itemprop="dateCreated datePublished" datetime="2019-08-29T08:29:01+08:00">2019-08-29</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><s><a target="_blank" rel="noopener" href="http://maxiang.info/#/?provider=evernote&guid=eeb1bd24-c059-46e5-9a5f-0dfbf7b8926a&notebook=blog">Edit</a></s></p>
<h1 id="git-导出某一次之后的提交"><a href="#git-导出某一次之后的提交" class="headerlink" title="git 导出某一次之后的提交"></a>git 导出某一次之后的提交</h1><p><a target="_blank" rel="noopener" href="http://blog.sina.com.cn/s/blog_68fed3d20102x8aj.html">参考</a><br>从某次提交之后的提交文件都导出</p>
<p><code>git diff 1dd49dae1d6443569a92ed43b78e2b709591dcd2 HEAD --name-only | xargs tar -rf ../xx.tar</code></p>
<div style="display: none;">@%28blog%29%5Bposts%2C%20git%5D%0A%0A%23%20git%20%u5BFC%u51FA%u67D0%u4E00%u6B21%u4E4B%u540E%u7684%u63D0%u4EA4%0A%0A%5B%u53C2%u8003%5D%28http%3A//blog.sina.com.cn/s/blog_68fed3d20102x8aj.html%29%0A%0A%u4ECE%u67D0%u6B21%u63D0%u4EA4%u4E4B%u540E%u7684%u63D0%u4EA4%u6587%u4EF6%u90FD%u5BFC%u51FA%0A%60%60%60%20bash%0Agit%20diff%201dd49dae1d6443569a92ed43b78e2b709591dcd2%20HEAD%20--name-only%20%7C%20xargs%20tar%20-rf%20../xx.tar%0A%60%60%60</div>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">yhl</p>
  <div class="site-description" itemprop="description">记录作者的一些历程，很杂乱，涉及很广...我也不知道我会什么</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">31</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yhl</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


</body>
</html>
